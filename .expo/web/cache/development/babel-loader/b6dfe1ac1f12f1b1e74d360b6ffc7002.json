{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/commons/asBaseComponent.js\";\nvar _excluded = [\"forwardedRef\"];\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Appearance from \"react-native-web/dist/exports/Appearance\";\nimport hoistStatics from 'hoist-non-react-statics';\nimport * as Modifiers from \"./modifiers\";\nimport forwardRef from \"./forwardRef\";\nimport UIComponent from \"./UIComponent\";\n\nfunction asBaseComponent(WrappedComponent) {\n  var BaseComponent = function (_UIComponent) {\n    _inherits(BaseComponent, _UIComponent);\n\n    var _super = _createSuper(BaseComponent);\n\n    function BaseComponent() {\n      var _this;\n\n      _classCallCheck(this, BaseComponent);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.state = {\n        error: false\n      };\n\n      _this.appearanceListener = function (_ref) {\n        var colorScheme = _ref.colorScheme;\n\n        _this.setState({\n          colorScheme: colorScheme\n        });\n      };\n\n      return _this;\n    }\n\n    _createClass(BaseComponent, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        Appearance.addChangeListener(this.appearanceListener);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        Appearance.removeChangeListener(this.appearanceListener);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _UIComponent$defaultP;\n\n        var themeProps = BaseComponent.getThemeProps(this.props, this.context);\n        var modifiers = Modifiers.generateModifiersStyle(undefined, themeProps);\n\n        var forwardedRef = themeProps.forwardedRef,\n            others = _objectWithoutProperties(themeProps, _excluded);\n\n        return this.state.error && ((_UIComponent$defaultP = UIComponent.defaultProps) == null ? void 0 : _UIComponent$defaultP.renderError) || React.createElement(WrappedComponent, _extends({}, others, {\n          modifiers: modifiers,\n          ref: forwardedRef,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 75\n          }\n        }));\n      }\n    }], [{\n      key: \"getDerivedStateFromError\",\n      value: function getDerivedStateFromError(error) {\n        var _UIComponent$defaultP2;\n\n        (_UIComponent$defaultP2 = UIComponent.defaultProps) == null ? void 0 : _UIComponent$defaultP2.onError == null ? void 0 : _UIComponent$defaultP2.onError(error, WrappedComponent.defaultProps);\n        return {\n          error: true\n        };\n      }\n    }]);\n\n    return BaseComponent;\n  }(UIComponent);\n\n  BaseComponent.getThemeProps = function (props, context) {\n    return Modifiers.getThemeProps.call(WrappedComponent, props, context);\n  };\n\n  hoistStatics(BaseComponent, WrappedComponent);\n  BaseComponent.displayName = WrappedComponent.displayName;\n  BaseComponent.propTypes = WrappedComponent.propTypes;\n  BaseComponent.defaultProps = WrappedComponent.defaultProps;\n  return forwardRef(BaseComponent);\n}\n\nexport default asBaseComponent;","map":{"version":3,"sources":["/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/commons/asBaseComponent.js"],"names":["React","hoistStatics","Modifiers","forwardRef","UIComponent","asBaseComponent","WrappedComponent","BaseComponent","state","error","appearanceListener","colorScheme","setState","Appearance","addChangeListener","removeChangeListener","themeProps","getThemeProps","props","context","modifiers","generateModifiersStyle","undefined","forwardedRef","others","defaultProps","renderError","onError","call","displayName","propTypes"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAGA,OAAOC,YAAP,MAAyB,yBAAzB;AAEA,OAAO,KAAKC,SAAZ;AACA,OAAOC,UAAP;AACA,OAAOC,WAAP;;AAEA,SAASC,eAAT,CAAyBC,gBAAzB,EAA2C;AAAA,MACnCC,aADmC;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,YAEvCC,KAFuC,GAE/B;AACNC,QAAAA,KAAK,EAAE;AADD,OAF+B;;AAAA,YAcvCC,kBAduC,GAclB,gBAEf;AAAA,YADJC,WACI,QADJA,WACI;;AACJ,cAAKC,QAAL,CAAc;AACZD,UAAAA,WAAW,EAAXA;AADY,SAAd;AAGD,OApBsC;;AAAA;AAAA;;AAAA;AAAA;AAAA,aAMvC,6BAAoB;AAClBE,QAAAA,UAAU,CAACC,iBAAX,CAA6B,KAAKJ,kBAAlC;AACD;AARsC;AAAA;AAAA,aAUvC,gCAAuB;AACrBG,QAAAA,UAAU,CAACE,oBAAX,CAAgC,KAAKL,kBAArC;AACD;AAZsC;AAAA;AAAA,aAgCvC,kBAAS;AAAA;;AACP,YAAMM,UAAU,GAAGT,aAAa,CAACU,aAAd,CAA4B,KAAKC,KAAjC,EAAwC,KAAKC,OAA7C,CAAnB;AACA,YAAMC,SAAS,GAAGlB,SAAS,CAACmB,sBAAV,CAAiCC,SAAjC,EAA4CN,UAA5C,CAAlB;;AAGA,YACEO,YADF,GAGIP,UAHJ,CACEO,YADF;AAAA,YAEKC,MAFL,4BAGIR,UAHJ;;AAIA,eAAO,KAAKR,KAAL,CAAWC,KAAX,8BAAoBL,WAAW,CAACqB,YAAhC,qBAAoB,sBAA0BC,WAA9C,KAA6D,oBAAC,gBAAD,eAAsBF,MAAtB;AAA8B,UAAA,SAAS,EAAEJ,SAAzC;AAAoD,UAAA,GAAG,EAAEG,YAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAApE;AACD;AA1CsC;AAAA;AAAA,aAyBvC,kCAAgCd,KAAhC,EAAuC;AAAA;;AACrC,kCAAAL,WAAW,CAACqB,YAAZ,4CAA0BE,OAA1B,2CAA0BA,OAA1B,CAAoClB,KAApC,EAA2CH,gBAAgB,CAACmB,YAA5D;AACA,eAAO;AACLhB,UAAAA,KAAK,EAAE;AADF,SAAP;AAGD;AA9BsC;;AAAA;AAAA,IACbL,WADa;;AACnCG,EAAAA,aADmC,CAqBhCU,aArBgC,GAqBhB,UAACC,KAAD,EAAQC,OAAR,EAAoB;AACzC,WAAOjB,SAAS,CAACe,aAAV,CAAwBW,IAAxB,CAA6BtB,gBAA7B,EAA+CY,KAA/C,EAAsDC,OAAtD,CAAP;AACD,GAvBsC;;AA+CzClB,EAAAA,YAAY,CAACM,aAAD,EAAgBD,gBAAhB,CAAZ;AACAC,EAAAA,aAAa,CAACsB,WAAd,GAA4BvB,gBAAgB,CAACuB,WAA7C;AACAtB,EAAAA,aAAa,CAACuB,SAAd,GAA0BxB,gBAAgB,CAACwB,SAA3C;AACAvB,EAAAA,aAAa,CAACkB,YAAd,GAA6BnB,gBAAgB,CAACmB,YAA9C;AACA,SAAOtB,UAAU,CAACI,aAAD,CAAjB;AACD;;AAED,eAAeF,eAAf","sourcesContent":["import React from 'react';\nimport { Appearance } from 'react-native'; //@ts-ignore\n\nimport hoistStatics from 'hoist-non-react-statics'; //@ts-ignore\n\nimport * as Modifiers from \"./modifiers\";\nimport forwardRef from \"./forwardRef\";\nimport UIComponent from \"./UIComponent\";\n\nfunction asBaseComponent(WrappedComponent) {\n  class BaseComponent extends UIComponent {\n    state = {\n      error: false\n    };\n\n    componentDidMount() {\n      Appearance.addChangeListener(this.appearanceListener);\n    }\n\n    componentWillUnmount() {\n      Appearance.removeChangeListener(this.appearanceListener);\n    }\n\n    appearanceListener = ({\n      colorScheme\n    }) => {\n      this.setState({\n        colorScheme\n      });\n    };\n    static getThemeProps = (props, context) => {\n      return Modifiers.getThemeProps.call(WrappedComponent, props, context);\n    };\n\n    static getDerivedStateFromError(error) {\n      UIComponent.defaultProps?.onError?.(error, WrappedComponent.defaultProps);\n      return {\n        error: true\n      };\n    }\n\n    render() {\n      const themeProps = BaseComponent.getThemeProps(this.props, this.context);\n      const modifiers = Modifiers.generateModifiersStyle(undefined, themeProps); // TODO: omit original modifiers props (left, right, flex, etc..)\n      // Because they throws an error when being passed to RNView on Android\n\n      const {\n        forwardedRef,\n        ...others\n      } = themeProps;\n      return this.state.error && UIComponent.defaultProps?.renderError || <WrappedComponent {...others} modifiers={modifiers} ref={forwardedRef} />;\n    }\n\n  } // Statics\n\n\n  hoistStatics(BaseComponent, WrappedComponent);\n  BaseComponent.displayName = WrappedComponent.displayName;\n  BaseComponent.propTypes = WrappedComponent.propTypes;\n  BaseComponent.defaultProps = WrappedComponent.defaultProps;\n  return forwardRef(BaseComponent);\n}\n\nexport default asBaseComponent;"]},"metadata":{},"sourceType":"module"}