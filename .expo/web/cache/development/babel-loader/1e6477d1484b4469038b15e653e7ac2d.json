{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"onPress\", \"disabled\", \"link\", \"style\", \"testID\", \"animateLayout\", \"modifiers\", \"forwardedRef\"];\nvar _jsxFileName = \"/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/components/button/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport React, { PureComponent } from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport LayoutAnimation from \"react-native-web/dist/exports/LayoutAnimation\";\nimport { asBaseComponent, forwardRef } from \"../../commons/new\";\nimport { Constants } from \"../../helpers\";\nimport { Colors, Typography, BorderRadiuses } from \"../../style\";\nimport { modifiers } from \"../../commons\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Text from \"../text\";\nimport Image from \"../image\";\nimport { ButtonSize, ButtonAnimationDirection, ButtonProps, ButtonPropTypes, DEFAULT_PROPS } from \"./ButtonTypes\";\nexport { ButtonSize, ButtonAnimationDirection, ButtonProps, ButtonPropTypes };\nimport { PADDINGS, HORIZONTAL_PADDINGS, MIN_WIDTH, DEFAULT_SIZE, DISABLED_COLOR } from \"./ButtonConstants\";\nvar extractColorValue = modifiers.extractColorValue,\n    extractTypographyValue = modifiers.extractTypographyValue;\n\nvar Button = function (_PureComponent) {\n  _inherits(Button, _PureComponent);\n\n  var _super = _createSuper(Button);\n\n  function Button(props) {\n    var _this;\n\n    _classCallCheck(this, Button);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      size: undefined\n    };\n    _this.styles = createStyles();\n\n    _this.onOrientationChanged = function () {\n      if (Constants.isTablet && _this.props.fullWidth) {\n        _this.setState({\n          isLandscape: Constants.isLandscape\n        });\n      }\n    };\n\n    _this.onLayout = function (event) {\n      var height = event.nativeEvent.layout.height;\n\n      if (_this.props.round) {\n        var width = event.nativeEvent.layout.width;\n        var size = height >= width ? height : width;\n\n        _this.setState({\n          size: size\n        });\n      }\n\n      if (Constants.isAndroid && Platform.Version <= 17) {\n        _this.setState({\n          borderRadius: height / 2\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Button, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.animateLayout && !_.isEqual(prevProps, this.props)) {\n        LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Constants.addDimensionsEventListener(this.onOrientationChanged);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Constants.removeDimensionsEventListener(this.onOrientationChanged);\n    }\n  }, {\n    key: \"isOutline\",\n    get: function get() {\n      var _this$props = this.props,\n          outline = _this$props.outline,\n          outlineColor = _this$props.outlineColor;\n      return Boolean(outline || outlineColor);\n    }\n  }, {\n    key: \"isFilled\",\n    get: function get() {\n      var link = this.props.link;\n      return !this.isOutline && !link;\n    }\n  }, {\n    key: \"isIconButton\",\n    get: function get() {\n      var _this$props2 = this.props,\n          iconSource = _this$props2.iconSource,\n          label = _this$props2.label;\n      return iconSource && !label;\n    }\n  }, {\n    key: \"getBackgroundColor\",\n    value: function getBackgroundColor() {\n      var _this$props3 = this.props,\n          themeBackgroundColor = _this$props3.backgroundColor,\n          modifiers = _this$props3.modifiers;\n      var _this$props4 = this.props,\n          disabled = _this$props4.disabled,\n          outline = _this$props4.outline,\n          link = _this$props4.link,\n          disabledBackgroundColor = _this$props4.disabledBackgroundColor,\n          propsBackgroundColor = _this$props4.backgroundColor;\n      var stateBackgroundColor = modifiers.backgroundColor;\n\n      if (!outline && !link) {\n        if (disabled) {\n          return disabledBackgroundColor || DISABLED_COLOR;\n        }\n\n        return propsBackgroundColor || stateBackgroundColor || themeBackgroundColor || Colors.primary;\n      }\n\n      return 'transparent';\n    }\n  }, {\n    key: \"getActiveBackgroundColor\",\n    value: function getActiveBackgroundColor() {\n      var getActiveBackgroundColor = this.props.getActiveBackgroundColor;\n\n      if (getActiveBackgroundColor) {\n        return getActiveBackgroundColor(this.getBackgroundColor(), this.props);\n      }\n    }\n  }, {\n    key: \"getLabelColor\",\n    value: function getLabelColor() {\n      var _this$props5 = this.props,\n          link = _this$props5.link,\n          linkColor = _this$props5.linkColor,\n          outline = _this$props5.outline,\n          outlineColor = _this$props5.outlineColor,\n          disabled = _this$props5.disabled,\n          propsColor = _this$props5.color;\n      var color = Colors.white;\n\n      if (link) {\n        color = linkColor || Colors.primary;\n      } else if (outline) {\n        color = outlineColor || Colors.primary;\n      } else if (this.isIconButton) {\n        color = undefined;\n      }\n\n      if (disabled && (link || outline)) {\n        return DISABLED_COLOR;\n      }\n\n      color = propsColor || extractColorValue(this.props) || color;\n      return color;\n    }\n  }, {\n    key: \"getLabelSizeStyle\",\n    value: function getLabelSizeStyle() {\n      var size = this.props.size || DEFAULT_SIZE;\n      var LABEL_STYLE_BY_SIZE = {};\n      LABEL_STYLE_BY_SIZE[Button.sizes.xSmall] = _objectSpread({}, Typography.text80);\n      LABEL_STYLE_BY_SIZE[Button.sizes.small] = _objectSpread({}, Typography.text80);\n      LABEL_STYLE_BY_SIZE[Button.sizes.medium] = _objectSpread({}, Typography.text80);\n      LABEL_STYLE_BY_SIZE[Button.sizes.large] = {};\n      var labelSizeStyle = LABEL_STYLE_BY_SIZE[size];\n      return labelSizeStyle;\n    }\n  }, {\n    key: \"getContainerSizeStyle\",\n    value: function getContainerSizeStyle() {\n      var _this$props6 = this.props,\n          outline = _this$props6.outline,\n          link = _this$props6.link,\n          avoidMinWidth = _this$props6.avoidMinWidth,\n          avoidInnerPadding = _this$props6.avoidInnerPadding,\n          round = _this$props6.round;\n      var size = this.props.size || DEFAULT_SIZE;\n      var outlineWidth = this.props.outlineWidth || 1;\n      var CONTAINER_STYLE_BY_SIZE = {};\n      CONTAINER_STYLE_BY_SIZE[Button.sizes.xSmall] = round ? {\n        height: this.state.size,\n        width: this.state.size,\n        padding: PADDINGS.XSMALL\n      } : {\n        paddingVertical: PADDINGS.XSMALL,\n        paddingHorizontal: HORIZONTAL_PADDINGS.XSMALL,\n        minWidth: MIN_WIDTH.XSMALL\n      };\n      CONTAINER_STYLE_BY_SIZE[Button.sizes.small] = round ? {\n        height: this.state.size,\n        width: this.state.size,\n        padding: PADDINGS.SMALL\n      } : {\n        paddingVertical: PADDINGS.SMALL,\n        paddingHorizontal: HORIZONTAL_PADDINGS.SMALL,\n        minWidth: MIN_WIDTH.SMALL\n      };\n      CONTAINER_STYLE_BY_SIZE[Button.sizes.medium] = round ? {\n        height: this.state.size,\n        width: this.state.size,\n        padding: PADDINGS.MEDIUM\n      } : {\n        paddingVertical: PADDINGS.MEDIUM,\n        paddingHorizontal: HORIZONTAL_PADDINGS.MEDIUM,\n        minWidth: MIN_WIDTH.MEDIUM\n      };\n      CONTAINER_STYLE_BY_SIZE[Button.sizes.large] = round ? {\n        height: this.state.size,\n        width: this.state.size,\n        padding: PADDINGS.LARGE\n      } : {\n        paddingVertical: PADDINGS.LARGE,\n        paddingHorizontal: HORIZONTAL_PADDINGS.LARGE,\n        minWidth: MIN_WIDTH.LARGE\n      };\n\n      if (outline) {\n        _.forEach(CONTAINER_STYLE_BY_SIZE, function (style) {\n          if (round) {\n            style.padding -= outlineWidth;\n          } else {\n            style.paddingVertical -= outlineWidth;\n            style.paddingHorizontal -= outlineWidth;\n          }\n        });\n      }\n\n      var containerSizeStyle = CONTAINER_STYLE_BY_SIZE[size];\n\n      if (link || this.isIconButton && !round) {\n        containerSizeStyle.paddingVertical = undefined;\n        containerSizeStyle.paddingHorizontal = undefined;\n        containerSizeStyle.minWidth = undefined;\n      }\n\n      if (avoidMinWidth) {\n        containerSizeStyle.minWidth = undefined;\n      }\n\n      if (avoidInnerPadding) {\n        containerSizeStyle.paddingVertical = undefined;\n        containerSizeStyle.paddingHorizontal = undefined;\n      }\n\n      return containerSizeStyle;\n    }\n  }, {\n    key: \"getOutlineStyle\",\n    value: function getOutlineStyle() {\n      var _this$props7 = this.props,\n          outline = _this$props7.outline,\n          outlineColor = _this$props7.outlineColor,\n          outlineWidth = _this$props7.outlineWidth,\n          link = _this$props7.link,\n          disabled = _this$props7.disabled;\n      var outlineStyle;\n\n      if ((outline || outlineColor) && !link) {\n        outlineStyle = {\n          borderWidth: outlineWidth || 1,\n          borderColor: outlineColor || Colors.primary\n        };\n\n        if (disabled) {\n          outlineStyle.borderColor = Colors.dark70;\n        }\n      }\n\n      return outlineStyle;\n    }\n  }, {\n    key: \"getBorderRadiusStyle\",\n    value: function getBorderRadiusStyle() {\n      var _this$props8 = this.props,\n          link = _this$props8.link,\n          fullWidth = _this$props8.fullWidth,\n          borderRadiusFromProps = _this$props8.borderRadius,\n          modifiers = _this$props8.modifiers;\n\n      if (link || fullWidth || borderRadiusFromProps === 0) {\n        return {\n          borderRadius: 0\n        };\n      }\n\n      var borderRadiusFromState = modifiers.borderRadius;\n      var borderRadius = borderRadiusFromProps || borderRadiusFromState || BorderRadiuses.br100;\n      return {\n        borderRadius: borderRadius\n      };\n    }\n  }, {\n    key: \"getShadowStyle\",\n    value: function getShadowStyle() {\n      var backgroundColor = this.getBackgroundColor();\n      var enableShadow = this.props.enableShadow;\n\n      if (enableShadow) {\n        return [this.styles.shadowStyle, backgroundColor && {\n          shadowColor: backgroundColor\n        }];\n      }\n    }\n  }, {\n    key: \"getIconStyle\",\n    value: function getIconStyle() {\n      var _this$props9 = this.props,\n          disabled = _this$props9.disabled,\n          propsIconStyle = _this$props9.iconStyle,\n          iconOnRight = _this$props9.iconOnRight;\n      var size = this.props.size || DEFAULT_SIZE;\n      var iconStyle = {\n        tintColor: this.getLabelColor()\n      };\n      var marginSide = [Button.sizes.large, Button.sizes.medium].includes(size) ? 8 : 4;\n\n      if (!this.isIconButton) {\n        if (iconOnRight) {\n          iconStyle.marginLeft = marginSide;\n        } else {\n          iconStyle.marginRight = marginSide;\n        }\n      }\n\n      if (disabled && !this.isFilled) {\n        iconStyle.tintColor = Colors.dark60;\n      }\n\n      return [iconStyle, propsIconStyle];\n    }\n  }, {\n    key: \"getAnimationDirectionStyle\",\n    value: function getAnimationDirectionStyle() {\n      var animateTo = this.props.animateTo;\n      var style;\n\n      switch (animateTo) {\n        case 'left':\n          style = {\n            alignSelf: 'flex-start'\n          };\n          break;\n\n        case 'right':\n          style = {\n            alignSelf: 'flex-end'\n          };\n          break;\n\n        default:\n          break;\n      }\n\n      return style;\n    }\n  }, {\n    key: \"renderIcon\",\n    value: function renderIcon() {\n      var _this$props10 = this.props,\n          iconSource = _this$props10.iconSource,\n          supportRTL = _this$props10.supportRTL;\n\n      if (iconSource) {\n        var iconStyle = this.getIconStyle();\n\n        if (typeof iconSource === 'function') {\n          return iconSource(iconStyle);\n        } else {\n          return React.createElement(Image, {\n            source: iconSource,\n            supportRTL: supportRTL,\n            style: iconStyle,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 16\n            }\n          });\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"renderLabel\",\n    value: function renderLabel() {\n      var _this$props11 = this.props,\n          label = _this$props11.label,\n          labelStyle = _this$props11.labelStyle,\n          labelProps = _this$props11.labelProps;\n      var typography = extractTypographyValue(this.props);\n      var color = this.getLabelColor();\n      var labelSizeStyle = this.getLabelSizeStyle();\n\n      if (label) {\n        return React.createElement(Text, _extends({\n          style: [this.styles.text, !!color && {\n            color: color\n          }, labelSizeStyle, _objectSpread({}, typography), labelStyle],\n          numberOfLines: 1\n        }, labelProps, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 14\n          }\n        }), label);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props12 = this.props,\n          onPress = _this$props12.onPress,\n          disabled = _this$props12.disabled,\n          link = _this$props12.link,\n          style = _this$props12.style,\n          testID = _this$props12.testID,\n          animateLayout = _this$props12.animateLayout,\n          modifiers = _this$props12.modifiers,\n          forwardedRef = _this$props12.forwardedRef,\n          others = _objectWithoutProperties(_this$props12, _excluded);\n\n      var shadowStyle = this.getShadowStyle();\n      var margins = modifiers.margins;\n      var backgroundColor = this.getBackgroundColor();\n      var outlineStyle = this.getOutlineStyle();\n      var containerSizeStyle = this.getContainerSizeStyle();\n      var borderRadiusStyle = this.getBorderRadiusStyle();\n      return React.createElement(TouchableOpacity, _extends({\n        row: true,\n        centerV: true,\n        style: [this.styles.container, animateLayout && this.getAnimationDirectionStyle(), containerSizeStyle, link && this.styles.innerContainerLink, shadowStyle, margins, backgroundColor && {\n          backgroundColor: backgroundColor\n        }, borderRadiusStyle, outlineStyle, style],\n        activeOpacity: 0.6,\n        activeBackgroundColor: this.getActiveBackgroundColor(),\n        onLayout: this.onLayout,\n        onPress: onPress,\n        disabled: disabled,\n        testID: testID\n      }, others, {\n        ref: forwardedRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 12\n        }\n      }), this.props.children, this.props.iconOnRight ? this.renderLabel() : this.renderIcon(), this.props.iconOnRight ? this.renderIcon() : this.renderLabel());\n    }\n  }]);\n\n  return Button;\n}(PureComponent);\n\nButton.displayName = 'Button';\nButton.defaultProps = DEFAULT_PROPS;\nButton.sizes = ButtonSize;\nButton.animationDirection = ButtonAnimationDirection;\n\nfunction createStyles() {\n  return StyleSheet.create({\n    container: {\n      backgroundColor: 'transparent',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    containerDisabled: {\n      backgroundColor: Colors.dark60\n    },\n    innerContainerLink: {\n      minWidth: undefined,\n      paddingHorizontal: undefined,\n      paddingVertical: undefined,\n      borderRadius: BorderRadiuses.br0,\n      backgroundColor: undefined\n    },\n    shadowStyle: {\n      shadowColor: Colors.blue10,\n      shadowOffset: {\n        height: 5,\n        width: 0\n      },\n      shadowOpacity: 0.35,\n      shadowRadius: 9.5,\n      elevation: 2\n    },\n    text: _objectSpread({\n      backgroundColor: 'transparent',\n      flex: 0,\n      flexDirection: 'row'\n    }, Typography.text70)\n  });\n}\n\nexport { Button };\nexport default asBaseComponent(forwardRef(Button));","map":{"version":3,"sources":["/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/components/button/index.js"],"names":["_","React","PureComponent","asBaseComponent","forwardRef","Constants","Colors","Typography","BorderRadiuses","modifiers","TouchableOpacity","Text","Image","ButtonSize","ButtonAnimationDirection","ButtonProps","ButtonPropTypes","DEFAULT_PROPS","PADDINGS","HORIZONTAL_PADDINGS","MIN_WIDTH","DEFAULT_SIZE","DISABLED_COLOR","extractColorValue","extractTypographyValue","Button","props","state","size","undefined","styles","createStyles","onOrientationChanged","isTablet","fullWidth","setState","isLandscape","onLayout","event","height","nativeEvent","layout","round","width","isAndroid","Platform","Version","borderRadius","prevProps","animateLayout","isEqual","LayoutAnimation","configureNext","Presets","easeInEaseOut","addDimensionsEventListener","removeDimensionsEventListener","outline","outlineColor","Boolean","link","isOutline","iconSource","label","themeBackgroundColor","backgroundColor","disabled","disabledBackgroundColor","propsBackgroundColor","stateBackgroundColor","primary","getActiveBackgroundColor","getBackgroundColor","linkColor","propsColor","color","white","isIconButton","LABEL_STYLE_BY_SIZE","sizes","xSmall","text80","small","medium","large","labelSizeStyle","avoidMinWidth","avoidInnerPadding","outlineWidth","CONTAINER_STYLE_BY_SIZE","padding","XSMALL","paddingVertical","paddingHorizontal","minWidth","SMALL","MEDIUM","LARGE","forEach","style","containerSizeStyle","outlineStyle","borderWidth","borderColor","dark70","borderRadiusFromProps","borderRadiusFromState","br100","enableShadow","shadowStyle","shadowColor","propsIconStyle","iconStyle","iconOnRight","tintColor","getLabelColor","marginSide","includes","marginLeft","marginRight","isFilled","dark60","animateTo","alignSelf","supportRTL","getIconStyle","labelStyle","labelProps","typography","getLabelSizeStyle","text","onPress","testID","forwardedRef","others","getShadowStyle","margins","getOutlineStyle","getContainerSizeStyle","borderRadiusStyle","getBorderRadiusStyle","container","getAnimationDirectionStyle","innerContainerLink","children","renderLabel","renderIcon","displayName","defaultProps","animationDirection","StyleSheet","create","justifyContent","alignItems","containerDisabled","br0","blue10","shadowOffset","shadowOpacity","shadowRadius","elevation","flex","flexDirection","text70"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;;;;AAEA,SAASC,eAAT,EAA0BC,UAA1B;AACA,SAASC,SAAT;AACA,SAASC,MAAT,EAAiBC,UAAjB,EAA6BC,cAA7B;AAEA,SAASC,SAAT;AACA,OAAOC,gBAAP;AACA,OAAOC,IAAP;AACA,OAAOC,KAAP;AACA,SAASC,UAAT,EAAqBC,wBAArB,EAA+CC,WAA/C,EAA4DC,eAA5D,EAA6EC,aAA7E;AACA,SAASJ,UAAT,EAAqBC,wBAArB,EAA+CC,WAA/C,EAA4DC,eAA5D;AACA,SAASE,QAAT,EAAmBC,mBAAnB,EAAwCC,SAAxC,EAAmDC,YAAnD,EAAiEC,cAAjE;AACA,IACEC,iBADF,GAGId,SAHJ,CACEc,iBADF;AAAA,IAEEC,sBAFF,GAGIf,SAHJ,CAEEe,sBAFF;;IAKMC,M;;;;;AAOJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AADiB,UAInBC,KAJmB,GAIX;AACNC,MAAAA,IAAI,EAAEC;AADA,KAJW;AAAA,UAOnBC,MAPmB,GAOVC,YAAY,EAPF;;AAAA,UAuBnBC,oBAvBmB,GAuBI,YAAM;AAC3B,UAAI3B,SAAS,CAAC4B,QAAV,IAAsB,MAAKP,KAAL,CAAWQ,SAArC,EAAgD;AAE9C,cAAKC,QAAL,CAAc;AACZC,UAAAA,WAAW,EAAE/B,SAAS,CAAC+B;AADX,SAAd;AAGD;AACF,KA9BkB;;AAAA,UAgCnBC,QAhCmB,GAgCR,UAAAC,KAAK,EAAI;AAClB,UAAMC,MAAM,GAAGD,KAAK,CAACE,WAAN,CAAkBC,MAAlB,CAAyBF,MAAxC;;AAEA,UAAI,MAAKb,KAAL,CAAWgB,KAAf,EAAsB;AACpB,YAAMC,KAAK,GAAGL,KAAK,CAACE,WAAN,CAAkBC,MAAlB,CAAyBE,KAAvC;AACA,YAAMf,IAAI,GAAGW,MAAM,IAAII,KAAV,GAAkBJ,MAAlB,GAA2BI,KAAxC;;AACA,cAAKR,QAAL,CAAc;AACZP,UAAAA,IAAI,EAAJA;AADY,SAAd;AAGD;;AAED,UAAIvB,SAAS,CAACuC,SAAV,IAAuBC,QAAQ,CAACC,OAAT,IAAoB,EAA/C,EAAmD;AACjD,cAAKX,QAAL,CAAc;AACZY,UAAAA,YAAY,EAAER,MAAM,GAAG;AADX,SAAd;AAGD;AACF,KAhDkB;;AAAA;AAElB;;;;WAOD,4BAAmBS,SAAnB,EAA8B;AAC5B,UAAI,KAAKtB,KAAL,CAAWuB,aAAX,IAA4B,CAACjD,CAAC,CAACkD,OAAF,CAAUF,SAAV,EAAqB,KAAKtB,KAA1B,CAAjC,EAAmE;AACjEyB,QAAAA,eAAe,CAACC,aAAhB,CAA8BD,eAAe,CAACE,OAAhB,CAAwBC,aAAtD;AACD;AACF;;;WAED,6BAAoB;AAClBjD,MAAAA,SAAS,CAACkD,0BAAV,CAAqC,KAAKvB,oBAA1C;AACD;;;WAED,gCAAuB;AACrB3B,MAAAA,SAAS,CAACmD,6BAAV,CAAwC,KAAKxB,oBAA7C;AACD;;;SA6BD,eAAgB;AACd,wBAGI,KAAKN,KAHT;AAAA,UACE+B,OADF,eACEA,OADF;AAAA,UAEEC,YAFF,eAEEA,YAFF;AAIA,aAAOC,OAAO,CAACF,OAAO,IAAIC,YAAZ,CAAd;AACD;;;SAED,eAAe;AACb,UACEE,IADF,GAEI,KAAKlC,KAFT,CACEkC,IADF;AAGA,aAAO,CAAC,KAAKC,SAAN,IAAmB,CAACD,IAA3B;AACD;;;SAED,eAAmB;AACjB,yBAGI,KAAKlC,KAHT;AAAA,UACEoC,UADF,gBACEA,UADF;AAAA,UAEEC,KAFF,gBAEEA,KAFF;AAIA,aAAOD,UAAU,IAAI,CAACC,KAAtB;AACD;;;WAED,8BAAqB;AACnB,yBAGI,KAAKrC,KAHT;AAAA,UACmBsC,oBADnB,gBACEC,eADF;AAAA,UAEExD,SAFF,gBAEEA,SAFF;AAIA,yBAMI,KAAKiB,KANT;AAAA,UACEwC,QADF,gBACEA,QADF;AAAA,UAEET,OAFF,gBAEEA,OAFF;AAAA,UAGEG,IAHF,gBAGEA,IAHF;AAAA,UAIEO,uBAJF,gBAIEA,uBAJF;AAAA,UAKmBC,oBALnB,gBAKEH,eALF;AAOA,UACmBI,oBADnB,GAEI5D,SAFJ,CACEwD,eADF;;AAIA,UAAI,CAACR,OAAD,IAAY,CAACG,IAAjB,EAAuB;AACrB,YAAIM,QAAJ,EAAc;AACZ,iBAAOC,uBAAuB,IAAI7C,cAAlC;AACD;;AAED,eAAO8C,oBAAoB,IAAIC,oBAAxB,IAAgDL,oBAAhD,IAAwE1D,MAAM,CAACgE,OAAtF;AACD;;AAED,aAAO,aAAP;AACD;;;WAED,oCAA2B;AACzB,UACEC,wBADF,GAEI,KAAK7C,KAFT,CACE6C,wBADF;;AAIA,UAAIA,wBAAJ,EAA8B;AAC5B,eAAOA,wBAAwB,CAAC,KAAKC,kBAAL,EAAD,EAA4B,KAAK9C,KAAjC,CAA/B;AACD;AACF;;;WAED,yBAAgB;AACd,yBAOI,KAAKA,KAPT;AAAA,UACEkC,IADF,gBACEA,IADF;AAAA,UAEEa,SAFF,gBAEEA,SAFF;AAAA,UAGEhB,OAHF,gBAGEA,OAHF;AAAA,UAIEC,YAJF,gBAIEA,YAJF;AAAA,UAKEQ,QALF,gBAKEA,QALF;AAAA,UAMSQ,UANT,gBAMEC,KANF;AAQA,UAAIA,KAAK,GAAGrE,MAAM,CAACsE,KAAnB;;AAEA,UAAIhB,IAAJ,EAAU;AACRe,QAAAA,KAAK,GAAGF,SAAS,IAAInE,MAAM,CAACgE,OAA5B;AACD,OAFD,MAEO,IAAIb,OAAJ,EAAa;AAClBkB,QAAAA,KAAK,GAAGjB,YAAY,IAAIpD,MAAM,CAACgE,OAA/B;AACD,OAFM,MAEA,IAAI,KAAKO,YAAT,EAAuB;AAC5BF,QAAAA,KAAK,GAAG9C,SAAR;AACD;;AAED,UAAIqC,QAAQ,KAAKN,IAAI,IAAIH,OAAb,CAAZ,EAAmC;AACjC,eAAOnC,cAAP;AACD;;AAEDqD,MAAAA,KAAK,GAAGD,UAAU,IAAInD,iBAAiB,CAAC,KAAKG,KAAN,CAA/B,IAA+CiD,KAAvD;AACA,aAAOA,KAAP;AACD;;;WAED,6BAAoB;AAClB,UAAM/C,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAX,IAAmBP,YAAhC;AACA,UAAMyD,mBAAmB,GAAG,EAA5B;AACAA,MAAAA,mBAAmB,CAACrD,MAAM,CAACsD,KAAP,CAAaC,MAAd,CAAnB,qBAAgDzE,UAAU,CAAC0E,MAA3D;AAEAH,MAAAA,mBAAmB,CAACrD,MAAM,CAACsD,KAAP,CAAaG,KAAd,CAAnB,qBAA+C3E,UAAU,CAAC0E,MAA1D;AAEAH,MAAAA,mBAAmB,CAACrD,MAAM,CAACsD,KAAP,CAAaI,MAAd,CAAnB,qBAAgD5E,UAAU,CAAC0E,MAA3D;AAEAH,MAAAA,mBAAmB,CAACrD,MAAM,CAACsD,KAAP,CAAaK,KAAd,CAAnB,GAA0C,EAA1C;AACA,UAAMC,cAAc,GAAGP,mBAAmB,CAAClD,IAAD,CAA1C;AACA,aAAOyD,cAAP;AACD;;;WAED,iCAAwB;AACtB,yBAMI,KAAK3D,KANT;AAAA,UACE+B,OADF,gBACEA,OADF;AAAA,UAEEG,IAFF,gBAEEA,IAFF;AAAA,UAGE0B,aAHF,gBAGEA,aAHF;AAAA,UAIEC,iBAJF,gBAIEA,iBAJF;AAAA,UAKE7C,KALF,gBAKEA,KALF;AAOA,UAAMd,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAX,IAAmBP,YAAhC;AACA,UAAMmE,YAAY,GAAG,KAAK9D,KAAL,CAAW8D,YAAX,IAA2B,CAAhD;AACA,UAAMC,uBAAuB,GAAG,EAAhC;AACAA,MAAAA,uBAAuB,CAAChE,MAAM,CAACsD,KAAP,CAAaC,MAAd,CAAvB,GAA+CtC,KAAK,GAAG;AACrDH,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC,IADkC;AAErDe,QAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWC,IAFmC;AAGrD8D,QAAAA,OAAO,EAAExE,QAAQ,CAACyE;AAHmC,OAAH,GAIhD;AACFC,QAAAA,eAAe,EAAE1E,QAAQ,CAACyE,MADxB;AAEFE,QAAAA,iBAAiB,EAAE1E,mBAAmB,CAACwE,MAFrC;AAGFG,QAAAA,QAAQ,EAAE1E,SAAS,CAACuE;AAHlB,OAJJ;AASAF,MAAAA,uBAAuB,CAAChE,MAAM,CAACsD,KAAP,CAAaG,KAAd,CAAvB,GAA8CxC,KAAK,GAAG;AACpDH,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC,IADiC;AAEpDe,QAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWC,IAFkC;AAGpD8D,QAAAA,OAAO,EAAExE,QAAQ,CAAC6E;AAHkC,OAAH,GAI/C;AACFH,QAAAA,eAAe,EAAE1E,QAAQ,CAAC6E,KADxB;AAEFF,QAAAA,iBAAiB,EAAE1E,mBAAmB,CAAC4E,KAFrC;AAGFD,QAAAA,QAAQ,EAAE1E,SAAS,CAAC2E;AAHlB,OAJJ;AASAN,MAAAA,uBAAuB,CAAChE,MAAM,CAACsD,KAAP,CAAaI,MAAd,CAAvB,GAA+CzC,KAAK,GAAG;AACrDH,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC,IADkC;AAErDe,QAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWC,IAFmC;AAGrD8D,QAAAA,OAAO,EAAExE,QAAQ,CAAC8E;AAHmC,OAAH,GAIhD;AACFJ,QAAAA,eAAe,EAAE1E,QAAQ,CAAC8E,MADxB;AAEFH,QAAAA,iBAAiB,EAAE1E,mBAAmB,CAAC6E,MAFrC;AAGFF,QAAAA,QAAQ,EAAE1E,SAAS,CAAC4E;AAHlB,OAJJ;AASAP,MAAAA,uBAAuB,CAAChE,MAAM,CAACsD,KAAP,CAAaK,KAAd,CAAvB,GAA8C1C,KAAK,GAAG;AACpDH,QAAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWC,IADiC;AAEpDe,QAAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWC,IAFkC;AAGpD8D,QAAAA,OAAO,EAAExE,QAAQ,CAAC+E;AAHkC,OAAH,GAI/C;AACFL,QAAAA,eAAe,EAAE1E,QAAQ,CAAC+E,KADxB;AAEFJ,QAAAA,iBAAiB,EAAE1E,mBAAmB,CAAC8E,KAFrC;AAGFH,QAAAA,QAAQ,EAAE1E,SAAS,CAAC6E;AAHlB,OAJJ;;AAUA,UAAIxC,OAAJ,EAAa;AACXzD,QAAAA,CAAC,CAACkG,OAAF,CAAUT,uBAAV,EAAmC,UAAAU,KAAK,EAAI;AAC1C,cAAIzD,KAAJ,EAAW;AACTyD,YAAAA,KAAK,CAACT,OAAN,IAAiBF,YAAjB;AACD,WAFD,MAEO;AACLW,YAAAA,KAAK,CAACP,eAAN,IAAyBJ,YAAzB;AAEAW,YAAAA,KAAK,CAACN,iBAAN,IAA2BL,YAA3B;AACD;AACF,SARD;AASD;;AAED,UAAMY,kBAAkB,GAAGX,uBAAuB,CAAC7D,IAAD,CAAlD;;AAEA,UAAIgC,IAAI,IAAI,KAAKiB,YAAL,IAAqB,CAACnC,KAAlC,EAAyC;AACvC0D,QAAAA,kBAAkB,CAACR,eAAnB,GAAqC/D,SAArC;AACAuE,QAAAA,kBAAkB,CAACP,iBAAnB,GAAuChE,SAAvC;AACAuE,QAAAA,kBAAkB,CAACN,QAAnB,GAA8BjE,SAA9B;AACD;;AAED,UAAIyD,aAAJ,EAAmB;AACjBc,QAAAA,kBAAkB,CAACN,QAAnB,GAA8BjE,SAA9B;AACD;;AAED,UAAI0D,iBAAJ,EAAuB;AACrBa,QAAAA,kBAAkB,CAACR,eAAnB,GAAqC/D,SAArC;AACAuE,QAAAA,kBAAkB,CAACP,iBAAnB,GAAuChE,SAAvC;AACD;;AAED,aAAOuE,kBAAP;AACD;;;WAED,2BAAkB;AAChB,yBAMI,KAAK1E,KANT;AAAA,UACE+B,OADF,gBACEA,OADF;AAAA,UAEEC,YAFF,gBAEEA,YAFF;AAAA,UAGE8B,YAHF,gBAGEA,YAHF;AAAA,UAIE5B,IAJF,gBAIEA,IAJF;AAAA,UAKEM,QALF,gBAKEA,QALF;AAOA,UAAImC,YAAJ;;AAEA,UAAI,CAAC5C,OAAO,IAAIC,YAAZ,KAA6B,CAACE,IAAlC,EAAwC;AACtCyC,QAAAA,YAAY,GAAG;AACbC,UAAAA,WAAW,EAAEd,YAAY,IAAI,CADhB;AAEbe,UAAAA,WAAW,EAAE7C,YAAY,IAAIpD,MAAM,CAACgE;AAFvB,SAAf;;AAKA,YAAIJ,QAAJ,EAAc;AACZmC,UAAAA,YAAY,CAACE,WAAb,GAA2BjG,MAAM,CAACkG,MAAlC;AACD;AACF;;AAED,aAAOH,YAAP;AACD;;;WAED,gCAAuB;AACrB,yBAKI,KAAK3E,KALT;AAAA,UACEkC,IADF,gBACEA,IADF;AAAA,UAEE1B,SAFF,gBAEEA,SAFF;AAAA,UAGgBuE,qBAHhB,gBAGE1D,YAHF;AAAA,UAIEtC,SAJF,gBAIEA,SAJF;;AAOA,UAAImD,IAAI,IAAI1B,SAAR,IAAqBuE,qBAAqB,KAAK,CAAnD,EAAsD;AACpD,eAAO;AACL1D,UAAAA,YAAY,EAAE;AADT,SAAP;AAGD;;AAED,UACgB2D,qBADhB,GAEIjG,SAFJ,CACEsC,YADF;AAGA,UAAMA,YAAY,GAAG0D,qBAAqB,IAAIC,qBAAzB,IAAkDlG,cAAc,CAACmG,KAAtF;AACA,aAAO;AACL5D,QAAAA,YAAY,EAAZA;AADK,OAAP;AAGD;;;WAED,0BAAiB;AACf,UAAMkB,eAAe,GAAG,KAAKO,kBAAL,EAAxB;AACA,UACEoC,YADF,GAEI,KAAKlF,KAFT,CACEkF,YADF;;AAIA,UAAIA,YAAJ,EAAkB;AAChB,eAAO,CAAC,KAAK9E,MAAL,CAAY+E,WAAb,EAA0B5C,eAAe,IAAI;AAClD6C,UAAAA,WAAW,EAAE7C;AADqC,SAA7C,CAAP;AAGD;AACF;;;WAED,wBAAe;AACb,yBAII,KAAKvC,KAJT;AAAA,UACEwC,QADF,gBACEA,QADF;AAAA,UAEa6C,cAFb,gBAEEC,SAFF;AAAA,UAGEC,WAHF,gBAGEA,WAHF;AAKA,UAAMrF,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAX,IAAmBP,YAAhC;AACA,UAAM2F,SAAS,GAAG;AAChBE,QAAAA,SAAS,EAAE,KAAKC,aAAL;AADK,OAAlB;AAGA,UAAMC,UAAU,GAAG,CAAC3F,MAAM,CAACsD,KAAP,CAAaK,KAAd,EAAqB3D,MAAM,CAACsD,KAAP,CAAaI,MAAlC,EAA0CkC,QAA1C,CAAmDzF,IAAnD,IAA2D,CAA3D,GAA+D,CAAlF;;AAEA,UAAI,CAAC,KAAKiD,YAAV,EAAwB;AACtB,YAAIoC,WAAJ,EAAiB;AACfD,UAAAA,SAAS,CAACM,UAAV,GAAuBF,UAAvB;AACD,SAFD,MAEO;AACLJ,UAAAA,SAAS,CAACO,WAAV,GAAwBH,UAAxB;AACD;AACF;;AAED,UAAIlD,QAAQ,IAAI,CAAC,KAAKsD,QAAtB,EAAgC;AAC9BR,QAAAA,SAAS,CAACE,SAAV,GAAsB5G,MAAM,CAACmH,MAA7B;AACD;;AAED,aAAO,CAACT,SAAD,EAAYD,cAAZ,CAAP;AACD;;;WAED,sCAA6B;AAC3B,UACEW,SADF,GAEI,KAAKhG,KAFT,CACEgG,SADF;AAGA,UAAIvB,KAAJ;;AAEA,cAAQuB,SAAR;AACE,aAAK,MAAL;AACEvB,UAAAA,KAAK,GAAG;AACNwB,YAAAA,SAAS,EAAE;AADL,WAAR;AAGA;;AAEF,aAAK,OAAL;AACExB,UAAAA,KAAK,GAAG;AACNwB,YAAAA,SAAS,EAAE;AADL,WAAR;AAGA;;AAEF;AAEE;AAfJ;;AAkBA,aAAOxB,KAAP;AACD;;;WAED,sBAAa;AACX,0BAGI,KAAKzE,KAHT;AAAA,UACEoC,UADF,iBACEA,UADF;AAAA,UAEE8D,UAFF,iBAEEA,UAFF;;AAKA,UAAI9D,UAAJ,EAAgB;AACd,YAAMkD,SAAS,GAAG,KAAKa,YAAL,EAAlB;;AAEA,YAAI,OAAO/D,UAAP,KAAsB,UAA1B,EAAsC;AACpC,iBAAOA,UAAU,CAACkD,SAAD,CAAjB;AACD,SAFD,MAEO;AACL,iBAAO,oBAAC,KAAD;AAAO,YAAA,MAAM,EAAElD,UAAf;AAA2B,YAAA,UAAU,EAAE8D,UAAvC;AAAmD,YAAA,KAAK,EAAEZ,SAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;AACF;;AAED,aAAO,IAAP;AACD;;;WAED,uBAAc;AACZ,0BAII,KAAKtF,KAJT;AAAA,UACEqC,KADF,iBACEA,KADF;AAAA,UAEE+D,UAFF,iBAEEA,UAFF;AAAA,UAGEC,UAHF,iBAGEA,UAHF;AAKA,UAAMC,UAAU,GAAGxG,sBAAsB,CAAC,KAAKE,KAAN,CAAzC;AACA,UAAMiD,KAAK,GAAG,KAAKwC,aAAL,EAAd;AACA,UAAM9B,cAAc,GAAG,KAAK4C,iBAAL,EAAvB;;AAEA,UAAIlE,KAAJ,EAAW;AACT,eAAO,oBAAC,IAAD;AAAM,UAAA,KAAK,EAAE,CAAC,KAAKjC,MAAL,CAAYoG,IAAb,EAAmB,CAAC,CAACvD,KAAF,IAAW;AAChDA,YAAAA,KAAK,EAALA;AADgD,WAA9B,EAEjBU,cAFiB,oBAEI2C,UAFJ,GAGjBF,UAHiB,CAAb;AAGS,UAAA,aAAa,EAAE;AAHxB,WAG+BC,UAH/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAIFhE,KAJE,CAAP;AAMD;;AAED,aAAO,IAAP;AACD;;;WAED,kBAAS;AACP,0BAUI,KAAKrC,KAVT;AAAA,UACEyG,OADF,iBACEA,OADF;AAAA,UAEEjE,QAFF,iBAEEA,QAFF;AAAA,UAGEN,IAHF,iBAGEA,IAHF;AAAA,UAIEuC,KAJF,iBAIEA,KAJF;AAAA,UAKEiC,MALF,iBAKEA,MALF;AAAA,UAMEnF,aANF,iBAMEA,aANF;AAAA,UAOExC,SAPF,iBAOEA,SAPF;AAAA,UAQE4H,YARF,iBAQEA,YARF;AAAA,UASKC,MATL;;AAWA,UAAMzB,WAAW,GAAG,KAAK0B,cAAL,EAApB;AACA,UACEC,OADF,GAEI/H,SAFJ,CACE+H,OADF;AAGA,UAAMvE,eAAe,GAAG,KAAKO,kBAAL,EAAxB;AACA,UAAM6B,YAAY,GAAG,KAAKoC,eAAL,EAArB;AACA,UAAMrC,kBAAkB,GAAG,KAAKsC,qBAAL,EAA3B;AACA,UAAMC,iBAAiB,GAAG,KAAKC,oBAAL,EAA1B;AACA,aAAO,oBAAC,gBAAD;AAAkB,QAAA,GAAG,MAArB;AAAsB,QAAA,OAAO,MAA7B;AAA8B,QAAA,KAAK,EAAE,CAAC,KAAK9G,MAAL,CAAY+G,SAAb,EAAwB5F,aAAa,IAAI,KAAK6F,0BAAL,EAAzC,EAA4E1C,kBAA5E,EAAgGxC,IAAI,IAAI,KAAK9B,MAAL,CAAYiH,kBAApH,EAAwIlC,WAAxI,EAAqJ2B,OAArJ,EAA8JvE,eAAe,IAAI;AAC3NA,UAAAA,eAAe,EAAfA;AAD2N,SAAjL,EAEzC0E,iBAFyC,EAEtBtC,YAFsB,EAERF,KAFQ,CAArC;AAEqC,QAAA,aAAa,EAAE,GAFpD;AAEyD,QAAA,qBAAqB,EAAE,KAAK5B,wBAAL,EAFhF;AAEiH,QAAA,QAAQ,EAAE,KAAKlC,QAFhI;AAE0I,QAAA,OAAO,EAAE8F,OAFnJ;AAE4J,QAAA,QAAQ,EAAEjE,QAFtK;AAEgL,QAAA,MAAM,EAAEkE;AAFxL,SAEoME,MAFpM;AAE4M,QAAA,GAAG,EAAED,YAFjN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAGF,KAAK3G,KAAL,CAAWsH,QAHT,EAIF,KAAKtH,KAAL,CAAWuF,WAAX,GAAyB,KAAKgC,WAAL,EAAzB,GAA8C,KAAKC,UAAL,EAJ5C,EAKF,KAAKxH,KAAL,CAAWuF,WAAX,GAAyB,KAAKiC,UAAL,EAAzB,GAA6C,KAAKD,WAAL,EAL3C,CAAP;AAOD;;;;EApakB/I,a;;AAAfuB,M,CACG0H,W,GAAc,Q;AADjB1H,M,CAEG2H,Y,GAAenI,a;AAFlBQ,M,CAGGsD,K,GAAQlE,U;AAHXY,M,CAIG4H,kB,GAAqBvI,wB;;AAoa9B,SAASiB,YAAT,GAAwB;AACtB,SAAOuH,UAAU,CAACC,MAAX,CAAkB;AACvBV,IAAAA,SAAS,EAAE;AACT5E,MAAAA,eAAe,EAAE,aADR;AAETuF,MAAAA,cAAc,EAAE,QAFP;AAGTC,MAAAA,UAAU,EAAE;AAHH,KADY;AAMvBC,IAAAA,iBAAiB,EAAE;AACjBzF,MAAAA,eAAe,EAAE3D,MAAM,CAACmH;AADP,KANI;AASvBsB,IAAAA,kBAAkB,EAAE;AAClBjD,MAAAA,QAAQ,EAAEjE,SADQ;AAElBgE,MAAAA,iBAAiB,EAAEhE,SAFD;AAGlB+D,MAAAA,eAAe,EAAE/D,SAHC;AAIlBkB,MAAAA,YAAY,EAAEvC,cAAc,CAACmJ,GAJX;AAKlB1F,MAAAA,eAAe,EAAEpC;AALC,KATG;AAgBvBgF,IAAAA,WAAW,EAAE;AACXC,MAAAA,WAAW,EAAExG,MAAM,CAACsJ,MADT;AAEXC,MAAAA,YAAY,EAAE;AACZtH,QAAAA,MAAM,EAAE,CADI;AAEZI,QAAAA,KAAK,EAAE;AAFK,OAFH;AAMXmH,MAAAA,aAAa,EAAE,IANJ;AAOXC,MAAAA,YAAY,EAAE,GAPH;AAQXC,MAAAA,SAAS,EAAE;AARA,KAhBU;AA0BvB9B,IAAAA,IAAI;AACFjE,MAAAA,eAAe,EAAE,aADf;AAEFgG,MAAAA,IAAI,EAAE,CAFJ;AAGFC,MAAAA,aAAa,EAAE;AAHb,OAIC3J,UAAU,CAAC4J,MAJZ;AA1BmB,GAAlB,CAAP;AAiCD;;AAED,SAAS1I,MAAT;AAEA,eAAetB,eAAe,CAACC,UAAU,CAACqB,MAAD,CAAX,CAA9B","sourcesContent":["import _ from 'lodash';\nimport React, { PureComponent } from 'react';\nimport { Platform, StyleSheet, LayoutAnimation } from 'react-native';\nimport { asBaseComponent, forwardRef } from \"../../commons/new\";\nimport { Constants } from \"../../helpers\";\nimport { Colors, Typography, BorderRadiuses } from \"../../style\"; // @ts-ignore need to migrate to commonsNew\n\nimport { modifiers } from \"../../commons\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Text from \"../text\";\nimport Image from \"../image\";\nimport { ButtonSize, ButtonAnimationDirection, ButtonProps, ButtonPropTypes, DEFAULT_PROPS } from \"./ButtonTypes\";\nexport { ButtonSize, ButtonAnimationDirection, ButtonProps, ButtonPropTypes };\nimport { PADDINGS, HORIZONTAL_PADDINGS, MIN_WIDTH, DEFAULT_SIZE, DISABLED_COLOR } from \"./ButtonConstants\";\nconst {\n  extractColorValue,\n  extractTypographyValue\n} = modifiers;\n\nclass Button extends PureComponent {\n  static displayName = 'Button';\n  static defaultProps = DEFAULT_PROPS;\n  static sizes = ButtonSize;\n  static animationDirection = ButtonAnimationDirection; // This redundant constructor for some reason fix tests :/\n  // eslint-disable-next-line\n\n  constructor(props) {\n    super(props);\n  }\n\n  state = {\n    size: undefined\n  };\n  styles = createStyles();\n\n  componentDidUpdate(prevProps) {\n    if (this.props.animateLayout && !_.isEqual(prevProps, this.props)) {\n      LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    }\n  }\n\n  componentDidMount() {\n    Constants.addDimensionsEventListener(this.onOrientationChanged);\n  }\n\n  componentWillUnmount() {\n    Constants.removeDimensionsEventListener(this.onOrientationChanged);\n  }\n\n  onOrientationChanged = () => {\n    if (Constants.isTablet && this.props.fullWidth) {\n      // only to trigger re-render\n      this.setState({\n        isLandscape: Constants.isLandscape\n      });\n    }\n  }; // This method will be called more than once in case of layout change!\n\n  onLayout = event => {\n    const height = event.nativeEvent.layout.height;\n\n    if (this.props.round) {\n      const width = event.nativeEvent.layout.width;\n      const size = height >= width ? height : width;\n      this.setState({\n        size\n      });\n    }\n\n    if (Constants.isAndroid && Platform.Version <= 17) {\n      this.setState({\n        borderRadius: height / 2\n      });\n    }\n  };\n\n  get isOutline() {\n    const {\n      outline,\n      outlineColor\n    } = this.props;\n    return Boolean(outline || outlineColor);\n  }\n\n  get isFilled() {\n    const {\n      link\n    } = this.props;\n    return !this.isOutline && !link;\n  }\n\n  get isIconButton() {\n    const {\n      iconSource,\n      label\n    } = this.props;\n    return iconSource && !label;\n  }\n\n  getBackgroundColor() {\n    const {\n      backgroundColor: themeBackgroundColor,\n      modifiers\n    } = this.props;\n    const {\n      disabled,\n      outline,\n      link,\n      disabledBackgroundColor,\n      backgroundColor: propsBackgroundColor\n    } = this.props;\n    const {\n      backgroundColor: stateBackgroundColor\n    } = modifiers;\n\n    if (!outline && !link) {\n      if (disabled) {\n        return disabledBackgroundColor || DISABLED_COLOR;\n      }\n\n      return propsBackgroundColor || stateBackgroundColor || themeBackgroundColor || Colors.primary;\n    }\n\n    return 'transparent';\n  }\n\n  getActiveBackgroundColor() {\n    const {\n      getActiveBackgroundColor\n    } = this.props;\n\n    if (getActiveBackgroundColor) {\n      return getActiveBackgroundColor(this.getBackgroundColor(), this.props);\n    }\n  }\n\n  getLabelColor() {\n    const {\n      link,\n      linkColor,\n      outline,\n      outlineColor,\n      disabled,\n      color: propsColor\n    } = this.props;\n    let color = Colors.white;\n\n    if (link) {\n      color = linkColor || Colors.primary;\n    } else if (outline) {\n      color = outlineColor || Colors.primary;\n    } else if (this.isIconButton) {\n      color = undefined; // Colors.dark10;\n    }\n\n    if (disabled && (link || outline)) {\n      return DISABLED_COLOR;\n    }\n\n    color = propsColor || extractColorValue(this.props) || color;\n    return color;\n  }\n\n  getLabelSizeStyle() {\n    const size = this.props.size || DEFAULT_SIZE;\n    const LABEL_STYLE_BY_SIZE = {};\n    LABEL_STYLE_BY_SIZE[Button.sizes.xSmall] = { ...Typography.text80\n    };\n    LABEL_STYLE_BY_SIZE[Button.sizes.small] = { ...Typography.text80\n    };\n    LABEL_STYLE_BY_SIZE[Button.sizes.medium] = { ...Typography.text80\n    };\n    LABEL_STYLE_BY_SIZE[Button.sizes.large] = {};\n    const labelSizeStyle = LABEL_STYLE_BY_SIZE[size];\n    return labelSizeStyle;\n  }\n\n  getContainerSizeStyle() {\n    const {\n      outline,\n      link,\n      avoidMinWidth,\n      avoidInnerPadding,\n      round\n    } = this.props;\n    const size = this.props.size || DEFAULT_SIZE;\n    const outlineWidth = this.props.outlineWidth || 1;\n    const CONTAINER_STYLE_BY_SIZE = {};\n    CONTAINER_STYLE_BY_SIZE[Button.sizes.xSmall] = round ? {\n      height: this.state.size,\n      width: this.state.size,\n      padding: PADDINGS.XSMALL\n    } : {\n      paddingVertical: PADDINGS.XSMALL,\n      paddingHorizontal: HORIZONTAL_PADDINGS.XSMALL,\n      minWidth: MIN_WIDTH.XSMALL\n    };\n    CONTAINER_STYLE_BY_SIZE[Button.sizes.small] = round ? {\n      height: this.state.size,\n      width: this.state.size,\n      padding: PADDINGS.SMALL\n    } : {\n      paddingVertical: PADDINGS.SMALL,\n      paddingHorizontal: HORIZONTAL_PADDINGS.SMALL,\n      minWidth: MIN_WIDTH.SMALL\n    };\n    CONTAINER_STYLE_BY_SIZE[Button.sizes.medium] = round ? {\n      height: this.state.size,\n      width: this.state.size,\n      padding: PADDINGS.MEDIUM\n    } : {\n      paddingVertical: PADDINGS.MEDIUM,\n      paddingHorizontal: HORIZONTAL_PADDINGS.MEDIUM,\n      minWidth: MIN_WIDTH.MEDIUM\n    };\n    CONTAINER_STYLE_BY_SIZE[Button.sizes.large] = round ? {\n      height: this.state.size,\n      width: this.state.size,\n      padding: PADDINGS.LARGE\n    } : {\n      paddingVertical: PADDINGS.LARGE,\n      paddingHorizontal: HORIZONTAL_PADDINGS.LARGE,\n      minWidth: MIN_WIDTH.LARGE\n    };\n\n    if (outline) {\n      _.forEach(CONTAINER_STYLE_BY_SIZE, style => {\n        if (round) {\n          style.padding -= outlineWidth; // eslint-disable-line\n        } else {\n          style.paddingVertical -= outlineWidth; // eslint-disable-line\n\n          style.paddingHorizontal -= outlineWidth; // eslint-disable-line\n        }\n      });\n    }\n\n    const containerSizeStyle = CONTAINER_STYLE_BY_SIZE[size];\n\n    if (link || this.isIconButton && !round) {\n      containerSizeStyle.paddingVertical = undefined;\n      containerSizeStyle.paddingHorizontal = undefined;\n      containerSizeStyle.minWidth = undefined;\n    }\n\n    if (avoidMinWidth) {\n      containerSizeStyle.minWidth = undefined;\n    }\n\n    if (avoidInnerPadding) {\n      containerSizeStyle.paddingVertical = undefined;\n      containerSizeStyle.paddingHorizontal = undefined;\n    }\n\n    return containerSizeStyle;\n  }\n\n  getOutlineStyle() {\n    const {\n      outline,\n      outlineColor,\n      outlineWidth,\n      link,\n      disabled\n    } = this.props;\n    let outlineStyle;\n\n    if ((outline || outlineColor) && !link) {\n      outlineStyle = {\n        borderWidth: outlineWidth || 1,\n        borderColor: outlineColor || Colors.primary\n      };\n\n      if (disabled) {\n        outlineStyle.borderColor = Colors.dark70;\n      }\n    }\n\n    return outlineStyle;\n  }\n\n  getBorderRadiusStyle() {\n    const {\n      link,\n      fullWidth,\n      borderRadius: borderRadiusFromProps,\n      modifiers\n    } = this.props;\n\n    if (link || fullWidth || borderRadiusFromProps === 0) {\n      return {\n        borderRadius: 0\n      };\n    }\n\n    const {\n      borderRadius: borderRadiusFromState\n    } = modifiers;\n    const borderRadius = borderRadiusFromProps || borderRadiusFromState || BorderRadiuses.br100;\n    return {\n      borderRadius\n    };\n  }\n\n  getShadowStyle() {\n    const backgroundColor = this.getBackgroundColor();\n    const {\n      enableShadow\n    } = this.props;\n\n    if (enableShadow) {\n      return [this.styles.shadowStyle, backgroundColor && {\n        shadowColor: backgroundColor\n      }];\n    }\n  }\n\n  getIconStyle() {\n    const {\n      disabled,\n      iconStyle: propsIconStyle,\n      iconOnRight\n    } = this.props;\n    const size = this.props.size || DEFAULT_SIZE;\n    const iconStyle = {\n      tintColor: this.getLabelColor()\n    };\n    const marginSide = [Button.sizes.large, Button.sizes.medium].includes(size) ? 8 : 4;\n\n    if (!this.isIconButton) {\n      if (iconOnRight) {\n        iconStyle.marginLeft = marginSide;\n      } else {\n        iconStyle.marginRight = marginSide;\n      }\n    }\n\n    if (disabled && !this.isFilled) {\n      iconStyle.tintColor = Colors.dark60;\n    }\n\n    return [iconStyle, propsIconStyle];\n  }\n\n  getAnimationDirectionStyle() {\n    const {\n      animateTo\n    } = this.props;\n    let style;\n\n    switch (animateTo) {\n      case 'left':\n        style = {\n          alignSelf: 'flex-start'\n        };\n        break;\n\n      case 'right':\n        style = {\n          alignSelf: 'flex-end'\n        };\n        break;\n\n      default:\n        // 'center' is the default\n        break;\n    }\n\n    return style;\n  }\n\n  renderIcon() {\n    const {\n      iconSource,\n      supportRTL\n    } = this.props;\n\n    if (iconSource) {\n      const iconStyle = this.getIconStyle();\n\n      if (typeof iconSource === 'function') {\n        return iconSource(iconStyle);\n      } else {\n        return <Image source={iconSource} supportRTL={supportRTL} style={iconStyle} />;\n      }\n    }\n\n    return null;\n  }\n\n  renderLabel() {\n    const {\n      label,\n      labelStyle,\n      labelProps\n    } = this.props;\n    const typography = extractTypographyValue(this.props);\n    const color = this.getLabelColor();\n    const labelSizeStyle = this.getLabelSizeStyle();\n\n    if (label) {\n      return <Text style={[this.styles.text, !!color && {\n        color\n      }, labelSizeStyle, { ...typography\n      }, labelStyle]} numberOfLines={1} {...labelProps}>\n          {label}\n        </Text>;\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      onPress,\n      disabled,\n      link,\n      style,\n      testID,\n      animateLayout,\n      modifiers,\n      forwardedRef,\n      ...others\n    } = this.props;\n    const shadowStyle = this.getShadowStyle();\n    const {\n      margins\n    } = modifiers;\n    const backgroundColor = this.getBackgroundColor();\n    const outlineStyle = this.getOutlineStyle();\n    const containerSizeStyle = this.getContainerSizeStyle();\n    const borderRadiusStyle = this.getBorderRadiusStyle();\n    return <TouchableOpacity row centerV style={[this.styles.container, animateLayout && this.getAnimationDirectionStyle(), containerSizeStyle, link && this.styles.innerContainerLink, shadowStyle, margins, backgroundColor && {\n      backgroundColor\n    }, borderRadiusStyle, outlineStyle, style]} activeOpacity={0.6} activeBackgroundColor={this.getActiveBackgroundColor()} onLayout={this.onLayout} onPress={onPress} disabled={disabled} testID={testID} {...others} ref={forwardedRef}>\n        {this.props.children}\n        {this.props.iconOnRight ? this.renderLabel() : this.renderIcon()}\n        {this.props.iconOnRight ? this.renderIcon() : this.renderLabel()}\n      </TouchableOpacity>;\n  }\n\n}\n\nfunction createStyles() {\n  return StyleSheet.create({\n    container: {\n      backgroundColor: 'transparent',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    containerDisabled: {\n      backgroundColor: Colors.dark60\n    },\n    innerContainerLink: {\n      minWidth: undefined,\n      paddingHorizontal: undefined,\n      paddingVertical: undefined,\n      borderRadius: BorderRadiuses.br0,\n      backgroundColor: undefined\n    },\n    shadowStyle: {\n      shadowColor: Colors.blue10,\n      shadowOffset: {\n        height: 5,\n        width: 0\n      },\n      shadowOpacity: 0.35,\n      shadowRadius: 9.5,\n      elevation: 2\n    },\n    text: {\n      backgroundColor: 'transparent',\n      flex: 0,\n      flexDirection: 'row',\n      ...Typography.text70\n    }\n  });\n}\n\nexport { Button }; // For tests\n\nexport default asBaseComponent(forwardRef(Button));"]},"metadata":{},"sourceType":"module"}