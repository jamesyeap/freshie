{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/components/picker/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport memoize from 'memoize-one';\nimport { asBaseComponent, forwardRef } from \"../../commons\";\nimport { LogService } from \"../../services\";\nimport View from \"../../components/view\";\nimport Modal from \"../modal\";\nimport Button from \"../../components/button\";\nimport { TextField } from \"../inputs\";\nimport NativePicker from \"./NativePicker\";\nimport PickerModal from \"./PickerModal\";\nimport PickerItem from \"./PickerItem\";\nimport PickerContext from \"./PickerContext\";\nimport { getItemLabel as getItemLabelPresenter, shouldFilterOut } from \"./PickerPresenter\";\nvar PICKER_MODES = {\n  SINGLE: 'SINGLE',\n  MULTI: 'MULTI'\n};\nvar ItemType = PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.shape({\n  value: PropTypes.any,\n  label: PropTypes.string\n})]);\n\nvar Picker = function (_Component) {\n  _inherits(Picker, _Component);\n\n  var _super = _createSuper(Picker);\n\n  function Picker(props) {\n    var _this;\n\n    _classCallCheck(this, Picker);\n\n    _this = _super.call(this, props);\n\n    _this.getContextValue = function () {\n      var value = _this.state.value;\n      var _this$props = _this.props,\n          migrate = _this$props.migrate,\n          mode = _this$props.mode,\n          getItemValue = _this$props.getItemValue,\n          getItemLabel = _this$props.getItemLabel,\n          renderItem = _this$props.renderItem,\n          selectionLimit = _this$props.selectionLimit;\n      var pickerValue = !migrate && _.isPlainObject(value) ? value == null ? void 0 : value.value : value;\n      return {\n        migrate: migrate,\n        value: pickerValue,\n        onPress: mode === Picker.modes.MULTI ? _this.toggleItemSelection : _this.onDoneSelecting,\n        isMultiMode: mode === Picker.modes.MULTI,\n        getItemValue: getItemValue,\n        getItemLabel: getItemLabel,\n        onSelectedLayout: _this.onSelectedItemLayout,\n        renderItem: renderItem,\n        selectionLimit: selectionLimit\n      };\n    };\n\n    _this.getLabelValueText = function () {\n      var value = _this.props.value;\n      return _this.getLabel(value);\n    };\n\n    _this.getLabelsFromArray = function (value) {\n      var items = _this.state.items;\n\n      var itemsByValue = _.keyBy(items, 'value');\n\n      var _this$props$getItemLa = _this.props.getItemLabel,\n          getItemLabel = _this$props$getItemLa === void 0 ? _.noop : _this$props$getItemLa;\n      return _.chain(value).map(function (item) {\n        var _itemsByValue$item;\n\n        return _.isPlainObject(item) ? getItemLabel(item) || (item == null ? void 0 : item.label) : (_itemsByValue$item = itemsByValue[item]) == null ? void 0 : _itemsByValue$item.label;\n      }).join(', ').value();\n    };\n\n    _this.getLabel = function (value) {\n      var getLabel = _this.props.getLabel;\n\n      if (_.isFunction(getLabel) && !_.isUndefined(getLabel(value))) {\n        return getLabel(value);\n      }\n\n      if (_.isArray(value)) {\n        return _this.getLabelsFromArray(value);\n      }\n\n      if (_.isPlainObject(value)) {\n        return _.get(value, 'label');\n      }\n\n      var items = _this.state.items;\n\n      var selectedItem = _.find(items, {\n        value: value\n      });\n\n      return _.get(selectedItem, 'label');\n    };\n\n    _this.getFilteredChildren = memoize(function (children, searchValue) {\n      var getItemLabelPicker = _this.props.getItemLabel;\n      return _.filter(children, function (child) {\n        var _child$props = child.props,\n            label = _child$props.label,\n            value = _child$props.value,\n            getItemLabel = _child$props.getItemLabel;\n        var itemLabel = getItemLabelPresenter(label, value, getItemLabel || getItemLabelPicker);\n        return !shouldFilterOut(searchValue, itemLabel);\n      });\n    });\n\n    _this.handlePickerOnPress = function () {\n      _this.toggleExpandableModal(true);\n\n      _.invoke(_this.props, 'onPress');\n    };\n\n    _this.toggleExpandableModal = function (value) {\n      _this.setState({\n        showExpandableModal: value\n      });\n\n      _this.clearSearchField();\n    };\n\n    _this.toggleItemSelection = function (item) {\n      var getItemValue = _this.props.getItemValue;\n      var value = _this.state.value;\n      var newValue;\n\n      if (_.isPlainObject(value)) {\n        newValue = _.xorBy(value, [item], getItemValue || 'value');\n      } else {\n        newValue = _.xor(value, [item]);\n      }\n\n      _this.setState({\n        value: newValue\n      });\n    };\n\n    _this.cancelSelect = function () {\n      _this.setState({\n        value: _this.props.value\n      });\n\n      _this.toggleExpandableModal(false);\n\n      _.invoke(_this.props, 'topBarProps.onCancel');\n    };\n\n    _this.onDoneSelecting = function (item) {\n      _this.clearSearchField();\n\n      _this.setState({\n        value: item\n      });\n\n      _this.toggleExpandableModal(false);\n\n      _.invoke(_this.props, 'onChange', item);\n    };\n\n    _this.onSearchChange = function (searchValue) {\n      _this.setState({\n        searchValue: searchValue\n      });\n\n      _.invoke(_this.props, 'onSearchChange', searchValue);\n    };\n\n    _this.onSelectedItemLayout = function (_ref) {\n      var y = _ref.nativeEvent.layout.y;\n\n      _this.setState({\n        selectedItemPosition: y\n      });\n    };\n\n    _this.clearSearchField = function () {\n      _this.setState({\n        searchValue: ''\n      });\n    };\n\n    _this.renderExpandableModal = function () {\n      var _this$props2 = _this.props,\n          mode = _this$props2.mode,\n          enableModalBlur = _this$props2.enableModalBlur,\n          topBarProps = _this$props2.topBarProps,\n          showSearch = _this$props2.showSearch,\n          onShow = _this$props2.onShow,\n          searchStyle = _this$props2.searchStyle,\n          searchPlaceholder = _this$props2.searchPlaceholder,\n          renderCustomSearch = _this$props2.renderCustomSearch,\n          renderCustomModal = _this$props2.renderCustomModal,\n          listProps = _this$props2.listProps,\n          children = _this$props2.children,\n          testID = _this$props2.testID;\n      var _this$state = _this.state,\n          showExpandableModal = _this$state.showExpandableModal,\n          selectedItemPosition = _this$state.selectedItemPosition,\n          value = _this$state.value;\n\n      if (renderCustomModal) {\n        var modalProps = {\n          visible: showExpandableModal,\n          toggleModal: _this.toggleExpandableModal,\n          onSearchChange: _this.onSearchChange,\n          children: children,\n          onDone: function onDone() {\n            return _this.onDoneSelecting(value);\n          },\n          onCancel: _this.cancelSelect\n        };\n        return React.createElement(React.Fragment, null, React.createElement(PickerContext.Provider, {\n          value: _this.getContextValue(),\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 11\n          }\n        }, renderCustomModal(modalProps)));\n      }\n\n      return React.createElement(PickerContext.Provider, {\n        value: _this.getContextValue(),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 7\n        }\n      }, React.createElement(PickerModal, {\n        testID: testID + \".modal\",\n        visible: showExpandableModal,\n        scrollPosition: selectedItemPosition,\n        enableModalBlur: enableModalBlur,\n        topBarProps: _objectSpread(_objectSpread({}, topBarProps), {}, {\n          onCancel: _this.cancelSelect,\n          onDone: mode === Picker.modes.MULTI ? function () {\n            return _this.onDoneSelecting(value);\n          } : undefined\n        }),\n        showSearch: showSearch,\n        searchStyle: searchStyle,\n        searchPlaceholder: searchPlaceholder,\n        onSearchChange: _this.onSearchChange,\n        renderCustomSearch: renderCustomSearch,\n        listProps: listProps,\n        onShow: onShow,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 9\n        }\n      }, _this.children));\n    };\n\n    _this.state = {\n      value: props.value,\n      prevValue: undefined,\n      selectedItemPosition: 0,\n      items: Picker.extractPickerItems(props)\n    };\n\n    if (props.mode === Picker.modes.SINGLE && Array.isArray(props.value)) {\n      LogService.warn('Picker in SINGLE mode cannot accept an array for value');\n    }\n\n    if (props.mode === Picker.modes.MULTI && !Array.isArray(props.value)) {\n      LogService.warn('Picker in MULTI mode must accept an array for value');\n    }\n\n    if (_.isPlainObject(props.value)) {\n      LogService.warn('UILib Picker will stop supporting passing object as value in the next major version. Please use either string or a number as value');\n    }\n\n    return _this;\n  }\n\n  _createClass(Picker, [{\n    key: \"getAccessibilityInfo\",\n    value: function getAccessibilityInfo() {\n      var placeholder = this.props.placeholder;\n      return {\n        accessibilityLabel: this.getLabelValueText() ? placeholder + \". selected. \" + this.getLabelValueText() : \"Select \" + placeholder,\n        accessibilityHint: this.getLabelValueText() ? 'Double tap to edit' : \"Goes to \" + placeholder + \". Suggestions will be provided\"\n      };\n    }\n  }, {\n    key: \"children\",\n    get: function get() {\n      var searchValue = this.state.searchValue;\n      var _this$props3 = this.props,\n          children = _this$props3.children,\n          showSearch = _this$props3.showSearch;\n\n      if (showSearch && !_.isEmpty(searchValue)) {\n        return this.getFilteredChildren(children, searchValue);\n      }\n\n      return children;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          useNativePicker = _this$props4.useNativePicker,\n          renderPicker = _this$props4.renderPicker,\n          customPickerProps = _this$props4.customPickerProps,\n          containerStyle = _this$props4.containerStyle,\n          testID = _this$props4.testID,\n          modifiers = _this$props4.modifiers;\n\n      if (useNativePicker) {\n        return React.createElement(NativePicker, _extends({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 14\n          }\n        }));\n      }\n\n      if (_.isFunction(renderPicker)) {\n        var value = this.state.value;\n        return React.createElement(View, {\n          left: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 9\n          }\n        }, React.createElement(Button, _extends({}, customPickerProps, {\n          link: true,\n          onPress: this.handlePickerOnPress,\n          testID: testID,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 11\n          }\n        }), renderPicker(value)), this.renderExpandableModal());\n      }\n\n      var textInputProps = TextField.extractOwnProps(this.props);\n      var label = this.getLabelValueText();\n      var paddings = modifiers.paddings,\n          margins = modifiers.margins,\n          positionStyle = modifiers.positionStyle;\n      return React.createElement(TextField, _extends({}, textInputProps, {\n        containerStyle: [paddings, margins, positionStyle, containerStyle]\n      }, this.getAccessibilityInfo(), {\n        importantForAccessibility: 'no-hide-descendants',\n        value: label,\n        expandable: true,\n        renderExpandable: this.renderExpandableModal,\n        onToggleExpandableModal: this.toggleExpandableModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 7\n        }\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (!_.isEmpty(nextProps.value) && prevState.value !== nextProps.value) {\n        if (prevState.prevValue !== prevState.value) {\n          return {\n            prevValue: prevState.value\n          };\n        } else {\n          return {\n            value: nextProps.value\n          };\n        }\n      } else if (_.isFunction(nextProps.renderPicker) && prevState.value !== nextProps.value) {\n        return {\n          prevValue: prevState.value,\n          value: nextProps.value\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"extractPickerItems\",\n    value: function extractPickerItems(props) {\n      var children = props.children;\n      var items = React.Children.map(children, function (child) {\n        return {\n          value: child.props.value,\n          label: child.props.label\n        };\n      });\n      return items;\n    }\n  }]);\n\n  return Picker;\n}(Component);\n\nPicker.displayName = 'Picker';\nPicker.propTypes = _objectSpread(_objectSpread({\n  migrate: PropTypes.bool\n}, TextField.propTypes), {}, {\n  value: PropTypes.oneOfType([ItemType, PropTypes.arrayOf(ItemType), PropTypes.object, PropTypes.string, PropTypes.number]),\n  onChange: PropTypes.func,\n  mode: PropTypes.oneOf(Object.keys(PICKER_MODES)),\n  selectionLimit: PropTypes.number,\n  enableModalBlur: PropTypes.bool,\n  renderPicker: PropTypes.elementType,\n  renderItem: PropTypes.elementType,\n  renderCustomModal: PropTypes.elementType,\n  customPickerProps: PropTypes.object,\n  onPress: PropTypes.func,\n  getItemValue: PropTypes.func,\n  getItemLabel: PropTypes.func,\n  getLabel: PropTypes.func,\n  topBarProps: PropTypes.shape(Modal.TopBar.propTypes),\n  showSearch: PropTypes.bool,\n  searchStyle: PropTypes.shape({\n    color: PropTypes.string,\n    placeholderTextColor: PropTypes.string,\n    selectionColor: PropTypes.string\n  }),\n  searchPlaceholder: PropTypes.string,\n  onSearchChange: PropTypes.func,\n  renderCustomSearch: PropTypes.elementType,\n  useNativePicker: PropTypes.bool,\n  renderNativePicker: PropTypes.elementType,\n  listProps: PropTypes.object\n});\nPicker.defaultProps = _objectSpread(_objectSpread({}, TextField.defaultProps), {}, {\n  mode: PICKER_MODES.SINGLE\n});\nPicker.modes = PICKER_MODES;\nPicker.Item = PickerItem;\nexport { Picker };\nexport default asBaseComponent(forwardRef(Picker));","map":{"version":3,"sources":["/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/components/picker/index.js"],"names":["_","PropTypes","React","Component","memoize","asBaseComponent","forwardRef","LogService","View","Modal","Button","TextField","NativePicker","PickerModal","PickerItem","PickerContext","getItemLabel","getItemLabelPresenter","shouldFilterOut","PICKER_MODES","SINGLE","MULTI","ItemType","oneOfType","number","string","shape","value","any","label","Picker","props","getContextValue","state","migrate","mode","getItemValue","renderItem","selectionLimit","pickerValue","isPlainObject","onPress","modes","toggleItemSelection","onDoneSelecting","isMultiMode","onSelectedLayout","onSelectedItemLayout","getLabelValueText","getLabel","getLabelsFromArray","items","itemsByValue","keyBy","noop","chain","map","item","join","isFunction","isUndefined","isArray","get","selectedItem","find","getFilteredChildren","children","searchValue","getItemLabelPicker","filter","child","itemLabel","handlePickerOnPress","toggleExpandableModal","invoke","setState","showExpandableModal","clearSearchField","newValue","xorBy","xor","cancelSelect","onSearchChange","y","nativeEvent","layout","selectedItemPosition","renderExpandableModal","enableModalBlur","topBarProps","showSearch","onShow","searchStyle","searchPlaceholder","renderCustomSearch","renderCustomModal","listProps","testID","modalProps","visible","toggleModal","onDone","onCancel","undefined","prevValue","extractPickerItems","Array","warn","placeholder","accessibilityLabel","accessibilityHint","isEmpty","useNativePicker","renderPicker","customPickerProps","containerStyle","modifiers","textInputProps","extractOwnProps","paddings","margins","positionStyle","getAccessibilityInfo","nextProps","prevState","Children","displayName","propTypes","bool","arrayOf","object","onChange","func","oneOf","Object","keys","elementType","TopBar","color","placeholderTextColor","selectionColor","renderNativePicker","defaultProps","Item"],"mappings":"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","sourcesContent":["// TODO: deprecate all places where we check if _.isPlainObject\n// TODO: deprecate getItemValue prop\n// TODO: deprecate getItemLabel prop\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, {Component} from 'react';\nimport memoize from 'memoize-one';\nimport {asBaseComponent, forwardRef} from '../../commons';\nimport {LogService} from '../../services';\nimport View from '../../components/view';\nimport Modal from '../modal';\nimport Button from '../../components/button';\nimport {TextField} from '../inputs';\nimport NativePicker from './NativePicker';\nimport PickerModal from './PickerModal';\nimport PickerItem from './PickerItem';\nimport PickerContext from './PickerContext';\nimport {getItemLabel as getItemLabelPresenter, shouldFilterOut} from './PickerPresenter';\n\nconst PICKER_MODES = {\n  SINGLE: 'SINGLE',\n  MULTI: 'MULTI'\n};\nconst ItemType = PropTypes.oneOfType([\n  PropTypes.number, \n  PropTypes.string,\n  PropTypes.shape({\n    value: PropTypes.any,\n    label: PropTypes.string\n  })]);\n\n/**\n * @description: Picker Component, support single or multiple selection, blurModel and nativePicker\n * @gif: https://github.com/wix/react-native-ui-lib/blob/master/demo/showcase/Picker/Default.gif?raw=true, https://github.com/wix/react-native-ui-lib/blob/master/demo/showcase/Picker/MultiPicker.gif?raw=true, https://github.com/wix/react-native-ui-lib/blob/master/demo/showcase/Picker/NativePicker.gif?raw=true, https://github.com/wix/react-native-ui-lib/blob/master/demo/showcase/Picker/DialogPicker.gif?raw=true, https://github.com/wix/react-native-ui-lib/blob/master/demo/showcase/Picker/CustomPicker.gif?raw=true\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/PickerScreen.js\n * @notes: 'useNativePicker' prop requires installing the '@react-native-picker/picker' native library\n */\nclass Picker extends Component {\n  static displayName = 'Picker';\n  static propTypes = {\n    /**\n     * Temporary prop required for migration to Picker's new API\n     */\n    migrate: PropTypes.bool,\n    ...TextField.propTypes,\n    /**\n     * Picker current value in the shape of {value: ..., label: ...}, for custom shape use 'getItemValue' prop\n     */\n    value: PropTypes.oneOfType([\n      ItemType,\n      PropTypes.arrayOf(ItemType),\n      PropTypes.object,\n      PropTypes.string,\n      PropTypes.number\n    ]),\n    /**\n     * Callback for when picker value change\n     */\n    onChange: PropTypes.func,\n    /**\n     * SINGLE mode or MULTI mode\n     */\n    mode: PropTypes.oneOf(Object.keys(PICKER_MODES)),\n    /**\n     * Limit the number of selected items\n     */\n    selectionLimit: PropTypes.number,\n    /**\n     * Adds blur effect to picker modal (iOS only)\n     */\n    enableModalBlur: PropTypes.bool,\n    /**\n     * Render custom picker - input will be value (see above)\n     * Example:\n     * renderPicker = (selectedItem) => {...}\n     */\n    renderPicker: PropTypes.elementType,\n    /**\n     * Render custom picker item\n     */\n    renderItem: PropTypes.elementType,\n    /**\n     * Render custom picker modal (e.g ({visible, children, toggleModal}) => {...})\n     */\n    renderCustomModal: PropTypes.elementType,\n    /**\n     * Custom picker props (when using renderPicker, will apply on the button wrapper)\n     */\n    customPickerProps: PropTypes.object,\n    /**\n     * Add onPress callback for when pressing the picker\n     */\n    onPress: PropTypes.func,\n    /**\n     * A function that extract the unique value out of the value prop in case value has a custom structure (e.g. {myValue, myLabel})\n     */\n    getItemValue: PropTypes.func,\n    /**\n     * A function that extract the label out of the value prop in case value has a custom structure (e.g. {myValue, myLabel})\n     */\n    getItemLabel: PropTypes.func,\n    /**\n     * A function that returns the label to show for the selected Picker value\n     */\n    getLabel: PropTypes.func,\n    /**\n     * The picker modal top bar props\n     */\n    topBarProps: PropTypes.shape(Modal.TopBar.propTypes),\n    /**\n     * Show search input to filter picker items by label\n     */\n    showSearch: PropTypes.bool,\n    /**\n     * Style object for the search input (only when passing showSearch)\n     */\n    searchStyle: PropTypes.shape({\n      color: PropTypes.string,\n      placeholderTextColor: PropTypes.string,\n      selectionColor: PropTypes.string\n    }),\n    /**\n     * Placeholder text for the search input (only when passing showSearch)\n     */\n    searchPlaceholder: PropTypes.string,\n    /**\n     * callback for picker modal search input text change (only when passing showSearch)\n     */\n    onSearchChange: PropTypes.func,\n    /**\n     * Render custom search input (only when passing showSearch)\n     */\n    renderCustomSearch: PropTypes.elementType,\n    /**\n     * Allow to use the native picker solution (different style for iOS and Android)\n     */\n    useNativePicker: PropTypes.bool,\n    /**\n     * Callback for rendering a custom native picker inside the dialog (relevant to native picker only)\n     */\n    renderNativePicker: PropTypes.elementType,\n    /**\n     * Pass props to the list component that wraps the picker options (allows to control FlatList behavior)\n     */\n    listProps: PropTypes.object\n  };\n\n  static defaultProps = {\n    ...TextField.defaultProps,\n    mode: PICKER_MODES.SINGLE\n  };\n\n  static modes = PICKER_MODES;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.value,\n      prevValue: undefined,\n      selectedItemPosition: 0,\n      items: Picker.extractPickerItems(props)\n    };\n\n    if (props.mode === Picker.modes.SINGLE && Array.isArray(props.value)) {\n      LogService.warn('Picker in SINGLE mode cannot accept an array for value');\n    }\n    if (props.mode === Picker.modes.MULTI && !Array.isArray(props.value)) {\n      LogService.warn('Picker in MULTI mode must accept an array for value');\n    }\n\n    // TODO: this warning should be replaced by the opposite\n    // we should warn user NOT to pass an object to the value prop\n    // if (props.useNativePicker && _.isPlainObject(props.value)) {\n    //   console.warn('UILib Picker: don\\'t use object as value for native picker, use either string or a number');\n    // }\n    if (_.isPlainObject(props.value)) {\n      LogService.warn('UILib Picker will stop supporting passing object as value in the next major version. Please use either string or a number as value');\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!_.isEmpty(nextProps.value) && prevState.value !== nextProps.value) {\n      if (prevState.prevValue !== prevState.value) {\n        // for this.setState() updates to 'value'\n        // NOTE: this.setState() already updated the 'value' so here we only updating the 'prevValue'\n        return {\n          prevValue: prevState.value\n        };\n      } else {\n        // for prop update to 'value'\n        return {\n          value: nextProps.value\n        };\n      }\n    } else if (_.isFunction(nextProps.renderPicker) && prevState.value !== nextProps.value) {\n      return {\n        prevValue: prevState.value,\n        value: nextProps.value\n      };\n    }\n    return null;\n  }\n\n  static extractPickerItems(props) {\n    const {children} = props;\n    const items = React.Children.map(children, child => ({value: child.props.value, label: child.props.label}));\n    return items;\n  }\n\n  getAccessibilityInfo() {\n    const {placeholder} = this.props;\n\n    return {\n      accessibilityLabel: this.getLabelValueText()\n        ? `${placeholder}. selected. ${this.getLabelValueText()}`\n        : `Select ${placeholder}`,\n      accessibilityHint: this.getLabelValueText()\n        ? 'Double tap to edit'\n        : `Goes to ${placeholder}. Suggestions will be provided`\n    };\n  }\n\n  getContextValue = () => {\n    const {value} = this.state;\n    const {migrate, mode, getItemValue, getItemLabel, renderItem, selectionLimit} = this.props;\n    const pickerValue = !migrate && _.isPlainObject(value) ? value?.value : value;\n    return {\n      migrate,\n      value: pickerValue,\n      onPress: mode === Picker.modes.MULTI ? this.toggleItemSelection : this.onDoneSelecting,\n      isMultiMode: mode === Picker.modes.MULTI,\n      getItemValue,\n      getItemLabel,\n      onSelectedLayout: this.onSelectedItemLayout,\n      renderItem,\n      selectionLimit\n    };\n  };\n\n  getLabelValueText = () => {\n    const {value} = this.props;\n    return this.getLabel(value);\n  };\n\n  getLabelsFromArray = value => {\n    const {items} = this.state;\n    const itemsByValue = _.keyBy(items, 'value');\n\n    const {getItemLabel = _.noop} = this.props;\n    return _.chain(value)\n      .map(item => (_.isPlainObject(item) ? getItemLabel(item) || item?.label : itemsByValue[item]?.label))\n      .join(', ')\n      .value();\n  };\n\n  getLabel = value => {\n    const {getLabel} = this.props;\n\n    if (_.isFunction(getLabel) && !_.isUndefined(getLabel(value))) {\n      return getLabel(value);\n    }\n    \n    if (_.isArray(value)) {\n      return this.getLabelsFromArray(value);\n    }\n\n    if (_.isPlainObject(value)) {\n      return _.get(value, 'label');\n    }\n\n    // otherwise, extract from picker items\n    const {items} = this.state;\n    const selectedItem = _.find(items, {value});\n\n    return _.get(selectedItem, 'label');\n  }\n\n  getFilteredChildren = memoize((children, searchValue) => {\n    const {getItemLabel: getItemLabelPicker} = this.props;\n    return _.filter(children, child => {\n      const {label, value, getItemLabel} = child.props;\n      const itemLabel = getItemLabelPresenter(label, value, getItemLabel || getItemLabelPicker);\n      return !shouldFilterOut(searchValue, itemLabel);\n    });\n  });\n\n  get children() {\n    const {searchValue} = this.state;\n    const {children, showSearch} = this.props;\n    if (showSearch && !_.isEmpty(searchValue)) {\n      return this.getFilteredChildren(children, searchValue);\n    }\n\n    return children;\n  }\n\n  handlePickerOnPress = () => {\n    this.toggleExpandableModal(true);\n    _.invoke(this.props, 'onPress');\n  };\n\n  toggleExpandableModal = value => {\n    this.setState({showExpandableModal: value});\n    this.clearSearchField();\n  };\n\n  toggleItemSelection = item => {\n    const {getItemValue} = this.props;\n    const {value} = this.state;\n    let newValue;\n    if (_.isPlainObject(value)) {\n      newValue = _.xorBy(value, [item], getItemValue || 'value');\n    } else {\n      newValue = _.xor(value, [item]);\n    }\n\n    this.setState({value: newValue});\n  };\n\n  cancelSelect = () => {\n    this.setState({value: this.props.value});\n    this.toggleExpandableModal(false);\n    _.invoke(this.props, 'topBarProps.onCancel');\n  };\n\n  onDoneSelecting = item => {\n    this.clearSearchField();\n    this.setState({value: item});\n    this.toggleExpandableModal(false);\n    _.invoke(this.props, 'onChange', item);\n  };\n\n  onSearchChange = searchValue => {\n    this.setState({searchValue});\n    _.invoke(this.props, 'onSearchChange', searchValue);\n  };\n\n  onSelectedItemLayout = ({nativeEvent: {layout: {y}}}) => {\n    this.setState({selectedItemPosition: y});\n  };\n\n  clearSearchField = () => {\n    this.setState({searchValue: ''});\n  };\n\n  renderExpandableModal = () => {\n    const {\n      mode,\n      enableModalBlur,\n      topBarProps,\n      showSearch,\n      onShow,\n      searchStyle,\n      searchPlaceholder,\n      renderCustomSearch,\n      renderCustomModal,\n      listProps,\n      children,\n      testID\n    } = this.props;\n    const {showExpandableModal, selectedItemPosition, value} = this.state;\n\n    if (renderCustomModal) {\n      const modalProps = {\n        visible: showExpandableModal,\n        toggleModal: this.toggleExpandableModal,\n        onSearchChange: this.onSearchChange,\n        children,\n        onDone: () => this.onDoneSelecting(value),\n        onCancel: this.cancelSelect\n      };\n\n      return (\n        <>\n          <PickerContext.Provider value={this.getContextValue()}>\n            {renderCustomModal(modalProps)}\n          </PickerContext.Provider>\n        </>\n      );\n    }\n\n    return (\n      <PickerContext.Provider value={this.getContextValue()}>\n        <PickerModal\n          testID={`${testID}.modal`}\n          visible={showExpandableModal}\n          scrollPosition={selectedItemPosition}\n          enableModalBlur={enableModalBlur}\n          topBarProps={{\n            ...topBarProps,\n            onCancel: this.cancelSelect,\n            onDone: mode === Picker.modes.MULTI ? () => this.onDoneSelecting(value) : undefined\n          }}\n          showSearch={showSearch}\n          searchStyle={searchStyle}\n          searchPlaceholder={searchPlaceholder}\n          onSearchChange={this.onSearchChange}\n          renderCustomSearch={renderCustomSearch}\n          listProps={listProps}\n          onShow={onShow}\n        >\n          {this.children} \n        </PickerModal>\n      </PickerContext.Provider>\n    );\n  };\n\n  render() {\n    const {useNativePicker, renderPicker, customPickerProps, containerStyle, testID, modifiers} = this.props;\n\n    if (useNativePicker) {\n      return <NativePicker {...this.props}/>;\n    }\n\n    if (_.isFunction(renderPicker)) {\n      const {value} = this.state;\n\n      return (\n        <View left>\n          <Button {...customPickerProps} link onPress={this.handlePickerOnPress} testID={testID}>\n            {renderPicker(value)}\n          </Button>\n          {this.renderExpandableModal()}\n        </View>\n      );\n    }\n\n    const textInputProps = TextField.extractOwnProps(this.props);\n    const label = this.getLabelValueText();\n    const {paddings, margins, positionStyle} = modifiers;\n\n    return (\n      <TextField\n        {...textInputProps}\n        containerStyle={[paddings, margins, positionStyle, containerStyle]}\n        {...this.getAccessibilityInfo()}\n        importantForAccessibility={'no-hide-descendants'}\n        value={label}\n        expandable\n        renderExpandable={this.renderExpandableModal}\n        onToggleExpandableModal={this.toggleExpandableModal}\n      />\n    );\n  }\n}\n\nPicker.Item = PickerItem;\n\nexport {Picker}; // For tests\nexport default asBaseComponent(forwardRef(Picker));\n"]},"metadata":{},"sourceType":"module"}