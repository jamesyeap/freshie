{"ast":null,"code":"import React, { useRef } from 'react';\nimport _ from 'lodash';\nimport useMiddleIndex from \"./helpers/useListMiddleIndex\";\n\nvar usePresenter = function usePresenter(_ref) {\n  var selectedValue = _ref.selectedValue,\n      children = _ref.children,\n      propItems = _ref.items,\n      itemHeight = _ref.itemHeight,\n      preferredNumVisibleRows = _ref.preferredNumVisibleRows;\n\n  var extractItemsFromChildren = function extractItemsFromChildren() {\n    var items = React.Children.map(children, function (child) {\n      var childAsType = {\n        value: child == null ? void 0 : child.props.value,\n        label: child == null ? void 0 : child.props.label\n      };\n      return childAsType;\n    });\n    return items || [];\n  };\n\n  var items = useRef(children ? extractItemsFromChildren() : propItems).current;\n  var middleIndex = useMiddleIndex({\n    itemHeight: itemHeight,\n    listSize: items.length\n  });\n\n  var getSelectedValueIndex = function getSelectedValueIndex() {\n    if (_.isString(selectedValue) || _.isNumber(selectedValue)) {\n      return _.findIndex(items, {\n        value: selectedValue\n      });\n    }\n\n    return _.findIndex(items, {\n      value: selectedValue == null ? void 0 : selectedValue.value\n    });\n  };\n\n  var shouldControlComponent = function shouldControlComponent(offset) {\n    return offset >= 0 && selectedValue !== getRowItemAtOffset(offset).value;\n  };\n\n  var getRowItemAtOffset = function getRowItemAtOffset(offset) {\n    var index = middleIndex(offset);\n    var value = items[index].value;\n    return {\n      index: index,\n      value: value\n    };\n  };\n\n  return {\n    shouldControlComponent: shouldControlComponent,\n    index: getSelectedValueIndex(),\n    items: items,\n    height: itemHeight * preferredNumVisibleRows,\n    getRowItemAtOffset: getRowItemAtOffset\n  };\n};\n\nexport default usePresenter;","map":{"version":3,"sources":["/Users/jamesyeap1/freshie/node_modules/react-native-ui-lib/src/incubator/WheelPicker/usePresenter.js"],"names":["React","useRef","_","useMiddleIndex","usePresenter","selectedValue","children","propItems","items","itemHeight","preferredNumVisibleRows","extractItemsFromChildren","Children","map","child","childAsType","value","props","label","current","middleIndex","listSize","length","getSelectedValueIndex","isString","isNumber","findIndex","shouldControlComponent","offset","getRowItemAtOffset","index","height"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,cAAP;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAMf;AAAA,MALJC,aAKI,QALJA,aAKI;AAAA,MAJJC,QAII,QAJJA,QAII;AAAA,MAHGC,SAGH,QAHJC,KAGI;AAAA,MAFJC,UAEI,QAFJA,UAEI;AAAA,MADJC,uBACI,QADJA,uBACI;;AACJ,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAM;AACrC,QAAMH,KAAK,GAAGR,KAAK,CAACY,QAAN,CAAeC,GAAf,CAAmBP,QAAnB,EAA6B,UAAAQ,KAAK,EAAI;AAClD,UAAMC,WAAW,GAAG;AAClBC,QAAAA,KAAK,EAAEF,KAAF,oBAAEA,KAAK,CAAEG,KAAP,CAAaD,KADF;AAElBE,QAAAA,KAAK,EAAEJ,KAAF,oBAAEA,KAAK,CAAEG,KAAP,CAAaC;AAFF,OAApB;AAIA,aAAOH,WAAP;AACD,KANa,CAAd;AAOA,WAAOP,KAAK,IAAI,EAAhB;AACD,GATD;;AAWA,MAAMA,KAAK,GAAGP,MAAM,CAACK,QAAQ,GAAGK,wBAAwB,EAA3B,GAAgCJ,SAAzC,CAAN,CAA0DY,OAAxE;AACA,MAAMC,WAAW,GAAGjB,cAAc,CAAC;AACjCM,IAAAA,UAAU,EAAVA,UADiC;AAEjCY,IAAAA,QAAQ,EAAEb,KAAK,CAACc;AAFiB,GAAD,CAAlC;;AAKA,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClC,QAAIrB,CAAC,CAACsB,QAAF,CAAWnB,aAAX,KAA6BH,CAAC,CAACuB,QAAF,CAAWpB,aAAX,CAAjC,EAA4D;AAC1D,aAAOH,CAAC,CAACwB,SAAF,CAAYlB,KAAZ,EAAmB;AACxBQ,QAAAA,KAAK,EAAEX;AADiB,OAAnB,CAAP;AAGD;;AAED,WAAOH,CAAC,CAACwB,SAAF,CAAYlB,KAAZ,EAAmB;AACxBQ,MAAAA,KAAK,EAAEX,aAAF,oBAAEA,aAAa,CAAEW;AADE,KAAnB,CAAP;AAGD,GAVD;;AAYA,MAAMW,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAAC,MAAM,EAAI;AACvC,WAAOA,MAAM,IAAI,CAAV,IAAevB,aAAa,KAAKwB,kBAAkB,CAACD,MAAD,CAAlB,CAA2BZ,KAAnE;AACD,GAFD;;AAIA,MAAMa,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAD,MAAM,EAAI;AACnC,QAAME,KAAK,GAAGV,WAAW,CAACQ,MAAD,CAAzB;AACA,QAAMZ,KAAK,GAAGR,KAAK,CAACsB,KAAD,CAAL,CAAad,KAA3B;AACA,WAAO;AACLc,MAAAA,KAAK,EAALA,KADK;AAELd,MAAAA,KAAK,EAALA;AAFK,KAAP;AAID,GAPD;;AASA,SAAO;AACLW,IAAAA,sBAAsB,EAAtBA,sBADK;AAELG,IAAAA,KAAK,EAAEP,qBAAqB,EAFvB;AAGLf,IAAAA,KAAK,EAALA,KAHK;AAILuB,IAAAA,MAAM,EAAEtB,UAAU,GAAGC,uBAJhB;AAKLmB,IAAAA,kBAAkB,EAAlBA;AALK,GAAP;AAOD,CAxDD;;AA0DA,eAAezB,YAAf","sourcesContent":["import React, { useRef } from 'react';\nimport _ from 'lodash';\nimport useMiddleIndex from \"./helpers/useListMiddleIndex\";\n\nconst usePresenter = ({\n  selectedValue,\n  children,\n  items: propItems,\n  itemHeight,\n  preferredNumVisibleRows\n}) => {\n  const extractItemsFromChildren = () => {\n    const items = React.Children.map(children, child => {\n      const childAsType = {\n        value: child?.props.value,\n        label: child?.props.label\n      };\n      return childAsType;\n    });\n    return items || [];\n  };\n\n  const items = useRef(children ? extractItemsFromChildren() : propItems).current;\n  const middleIndex = useMiddleIndex({\n    itemHeight,\n    listSize: items.length\n  });\n\n  const getSelectedValueIndex = () => {\n    if (_.isString(selectedValue) || _.isNumber(selectedValue)) {\n      return _.findIndex(items, {\n        value: selectedValue\n      });\n    }\n\n    return _.findIndex(items, {\n      value: selectedValue?.value\n    });\n  };\n\n  const shouldControlComponent = offset => {\n    return offset >= 0 && selectedValue !== getRowItemAtOffset(offset).value;\n  };\n\n  const getRowItemAtOffset = offset => {\n    const index = middleIndex(offset);\n    const value = items[index].value;\n    return {\n      index,\n      value\n    };\n  };\n\n  return {\n    shouldControlComponent,\n    index: getSelectedValueIndex(),\n    items,\n    height: itemHeight * preferredNumVisibleRows,\n    getRowItemAtOffset\n  };\n};\n\nexport default usePresenter;"]},"metadata":{},"sourceType":"module"}